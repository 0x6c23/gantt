{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b3dd63ecb72438c7f8ad","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?b27d","webpack:///./src/gantt.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Bar.js","webpack:///./src/Arrow.js"],"names":["Gantt","element","tasks","config","self","init","set_defaults","change_view_mode","view_mode","defaults","header_height","column_width","step","view_modes","bar","height","arrow","curve","padding","date_format","_tasks","Object","assign","_bars","_arrows","element_groups","mode","set_scale","prepare","render","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","map","task","i","_start","moment","start","_end","end","_index","startOf","add","clone","invalid","deps","dependencies","split","d","trim","filter","dependency_map","t","push","id","gantt_start","gantt_end","set_gantt_dates","setup_dates","canvas","Snap","addClass","clear","setup_groups","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","setup_events","set_width","set_scroll_position","bind_grid_click","view_is","subtract","endOf","dates","cur_date","groups","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","getBBox","parent_element","document","querySelector","parentElement","scroll_pos","get_min_date","diff","scrollLeft","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","length","grid_height","rect","appendTo","grid","header_width","rows","lines","row_width","row_height","row_y","line","tick_x","tick_y","tick_height","date","tick_class","day","month","path","format","x","y","daysInMonth","get_dates_to_draw","text","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","x2","remove","last_date","get_date_info","date_text","year","base_pos","x_pos","dependency","get_task","dep","arrows","from_task","to_task","click","selectAll","forEach","el","removeClass","modes","Array","isArray","find","get_bar","Bar","gt","draw","bind","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","bar_group","handle_group","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","$bar_progress","name","update_label_position","bar_progress","handle_width","polygon","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details","details_box","select","dx","dy","mouseover","e","pos","get_details_position","transform","start_date","end_date","heading","$heading","bbox","body1","body2","$body","mouseout","setTimeout","get_handles","left","right","drag","onmove_left","onstart","onstop_left","onmove_right","onstop_right","ox","oy","onmove_handle_right","onstop_handle_right","onmove_handle_left","onstop_handle_left","onmove","onstop","handle","max_dx","min_dx","owidth","finaldx","progress_changed","set_action_completed","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","fn","args","dm","deptask","dt","apply","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","events","on_date_change","compute_start_date","compute_end_date","on_progress_change","compute_progress","shift","new_start_date","og_x","final_x","new_end_date","odx","rem","position","value","isNaN","label","update","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2","get","gantt"],"mappings":"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ACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;A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","file":"gantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gantt\"] = factory();\n\telse\n\t\troot[\"gantt\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b3dd63ecb72438c7f8ad\n **/","/* global moment, Snap */\n/**\n * Gantt:\n * \telement: querySelector string, required\n * \ttasks: array of tasks, required\n *   task: { id, name, start, end, progress, dependencies }\n * \tconfig: configuration options, optional\n */\nimport './gantt.scss';\n\nimport Bar from './Bar';\nimport Arrow from './Arrow';\n\nexport default function Gantt(element, tasks, config) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\t// initialize with default view mode\n\t\tchange_view_mode(self.config.view_mode);\n\t}\n\n\tfunction set_defaults() {\n\n\t\tconst defaults = {\n\t\t\theader_height: 50,\n\t\t\tcolumn_width: 30,\n\t\t\tstep: 24,\n\t\t\tview_modes: [\n\t\t\t\t'Quarter Day',\n\t\t\t\t'Half Day',\n\t\t\t\t'Day',\n\t\t\t\t'Week',\n\t\t\t\t'Month'\n\t\t\t],\n\t\t\tbar: {\n\t\t\t\theight: 20\n\t\t\t},\n\t\t\tarrow: {\n\t\t\t\tcurve: 5\n\t\t\t},\n\t\t\tpadding: 18,\n\t\t\tview_mode: 'Day',\n\t\t\tdate_format: 'YYYY-MM-DD'\n\t\t};\n\n\t\tself.element = element;\n\t\tself._tasks = tasks;\n\t\tself.config = Object.assign({}, defaults, config);\n\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t\tself.element_groups = {};\n\t}\n\n\tfunction change_view_mode(mode) {\n\t\tset_scale(mode);\n\t\tprepare();\n\t\trender();\n\t}\n\n\tfunction prepare() {\n\t\tprepare_tasks();\n\t\tprepare_dependencies();\n\t\tprepare_dates();\n\t\tprepare_canvas();\n\t}\n\n\tfunction prepare_tasks() {\n\n\t\t// prepare tasks\n\t\tself.tasks = self._tasks.map((task, i) => {\n\n\t\t\t// momentify\n\t\t\ttask._start = moment(task.start, self.config.date_format);\n\t\t\ttask._end = moment(task.end, self.config.date_format);\n\n\t\t\t// cache index\n\t\t\ttask._index = i;\n\n\t\t\t// invalid dates\n\t\t\tif(!task.start && !task.end) {\n\t\t\t\ttask._start = moment().startOf('day');\n\t\t\t\ttask._end = moment().startOf('day').add(2, 'days');\n\t\t\t} else if(!task.start) {\n\t\t\t\ttask._start = task._end.clone().add(-2, 'days');\n\t\t\t} else {\n\t\t\t\ttask._end = task._start.clone().add(2, 'days');\n\t\t\t}\n\n\t\t\t// invalid flag\n\t\t\tif(!task.start || !task.end) {\n\t\t\t\ttask.invalid = true;\n\t\t\t}\n\n\t\t\t// dependencies\n\t\t\tlet deps;\n\n\t\t\tif(task.dependencies) {\n\t\t\t\tdeps = task.dependencies\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map(d => d.trim())\n\t\t\t\t\t.filter((d) => d);\n\t\t\t} else {\n\t\t\t\tdeps = [];\n\t\t\t}\n\t\t\ttask.dependencies = deps;\n\n\t\t\treturn task;\n\t\t});\n\t}\n\tfunction prepare_dependencies() {\n\n\t\tself.dependency_map = {};\n\t\tfor(let t of self.tasks) {\n\t\t\tfor(let d of t.dependencies) {\n\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\n\t\t\t\tself.dependency_map[d].push(t.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prepare_dates() {\n\n\t\tfor(let task of self.tasks) {\n\t\t\t// set global start and end date\n\t\t\tif(!self.gantt_start || task._start < self.gantt_start) {\n\t\t\t\tself.gantt_start = task._start;\n\t\t\t}\n\t\t\tif(!self.gantt_end || task._end > self.gantt_end) {\n\t\t\t\tself.gantt_end = task._end;\n\t\t\t}\n\t\t}\n\t\tset_gantt_dates();\n\t\tsetup_dates();\n\t}\n\n\tfunction prepare_canvas() {\n\t\tself.canvas = Snap(self.element).addClass('gantt');\n\t}\n\n\tfunction render() {\n\t\tclear();\n\t\tsetup_groups();\n\t\tmake_grid();\n\t\tmake_dates();\n\t\tmake_bars();\n\t\tmake_arrows();\n\t\tmap_arrows_on_bars();\n\t\tsetup_events();\n\t\tset_width();\n\t\tset_scroll_position();\n\t\tbind_grid_click();\n\t}\n\n\tfunction clear() {\n\t\tself.canvas.clear();\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t}\n\n\tfunction set_gantt_dates() {\n\n\t\tif(view_is(['Quarter Day', 'Half Day'])) {\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\n\t\t} else if(view_is('Month')) {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n\t\t} else {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n\t\t}\n\t}\n\n\tfunction setup_dates() {\n\n\t\tself.dates = [];\n\t\tlet cur_date = null;\n\n\t\twhile(cur_date === null || cur_date < self.gantt_end) {\n\t\t\tif(!cur_date) {\n\t\t\t\tcur_date = self.gantt_start.clone();\n\t\t\t} else {\n\t\t\t\tcur_date = view_is('Month') ?\n\t\t\t\t\tcur_date.clone().add(1, 'month') :\n\t\t\t\t\tcur_date.clone().add(self.config.step, 'hours');\n\t\t\t}\n\t\t\tself.dates.push(cur_date);\n\t\t}\n\t}\n\n\tfunction setup_groups() {\n\n\t\tconst groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n\t\t// make group layers\n\t\tfor(let group of groups) {\n\t\t\tself.element_groups[group] = self.canvas.group().attr({'id': group});\n\t\t}\n\t}\n\n\tfunction set_scale(scale) {\n\t\tself.config.view_mode = scale;\n\n\t\t// fire viewmode_change event\n\t\t// self.events.on_viewmode_change(scale);\n\t\t// trigger(\"view_mode_change\");\n\n\t\tif(scale === 'Day') {\n\t\t\tself.config.step = 24;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Half Day') {\n\t\t\tself.config.step = 24 / 2;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Quarter Day') {\n\t\t\tself.config.step = 24 / 4;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Week') {\n\t\t\tself.config.step = 24 * 7;\n\t\t\tself.config.column_width = 140;\n\t\t} else if(scale === 'Month') {\n\t\t\tself.config.step = 24 * 30;\n\t\t\tself.config.column_width = 120;\n\t\t}\n\t}\n\n\tfunction set_width() {\n\t\tconst cur_width = self.canvas.node.getBoundingClientRect().width;\n\t\tconst actual_width = self.canvas.getBBox().width;\n\t\tif(cur_width < actual_width) {\n\t\t\tself.canvas.attr('width', actual_width);\n\t\t}\n\t}\n\n\tfunction set_scroll_position() {\n\t\tconst parent_element = document.querySelector(self.element).parentElement;\n\t\tif(!parent_element) return;\n\n\t\tconst scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\n\t\t\tself.config.step * self.config.column_width;\n\t\tparent_element.scrollLeft = scroll_pos;\n\t}\n\n\tfunction get_min_date() {\n\t\tconst task = self.tasks.reduce((acc, curr) => {\n\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\n\t\t});\n\t\treturn task._start;\n\t}\n\n\tfunction make_grid() {\n\t\tmake_grid_background();\n\t\tmake_grid_rows();\n\t\tmake_grid_header();\n\t\tmake_grid_ticks();\n\t\tmake_grid_highlights();\n\t}\n\n\tfunction make_grid_background() {\n\n\t\tconst grid_width = self.dates.length * self.config.column_width,\n\t\t\tgrid_height = self.config.header_height + self.config.padding +\n\t\t\t\t(self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tself.canvas.rect(0, 0, grid_width, grid_height)\n\t\t\t.addClass('grid-background')\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\tself.canvas.attr({\n\t\t\theight: grid_height + self.config.padding,\n\t\t\twidth: '100%'\n\t\t});\n\t}\n\n\tfunction make_grid_header() {\n\t\tconst header_width = self.dates.length * self.config.column_width,\n\t\t\theader_height = self.config.header_height + 10;\n\t\tself.canvas.rect(0, 0, header_width, header_height)\n\t\t\t.addClass('grid-header')\n\t\t\t.appendTo(self.element_groups.grid);\n\t}\n\n\tfunction make_grid_rows() {\n\n\t\tconst rows = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\tlines = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\trow_width = self.dates.length * self.config.column_width,\n\t\t\trow_height = self.config.bar.height + self.config.padding;\n\n\t\tlet row_y = self.config.header_height + self.config.padding / 2;\n\n\t\tfor(let task of self.tasks) { // eslint-disable-line\n\t\t\tself.canvas.rect(0, row_y, row_width, row_height)\n\t\t\t\t.addClass('grid-row')\n\t\t\t\t.appendTo(rows);\n\n\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\n\t\t\t\t.addClass('row-line')\n\t\t\t\t.appendTo(lines);\n\n\t\t\trow_y += self.config.bar.height + self.config.padding;\n\t\t}\n\t}\n\n\tfunction make_grid_ticks() {\n\t\tlet tick_x = 0,\n\t\t\ttick_y = self.config.header_height + self.config.padding / 2,\n\t\t\ttick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tfor(let date of self.dates) {\n\t\t\tlet tick_class = 'tick';\n\t\t\t// thick tick for monday\n\t\t\tif(view_is('Day') && date.day() === 1) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick tick for first week\n\t\t\tif(view_is('Week') && date.date() >= 1 && date.date() < 8) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick ticks for quarters\n\t\t\tif(view_is('Month') && date.month() % 3 === 0) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\n\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\n\t\t\t\tx: tick_x,\n\t\t\t\ty: tick_y,\n\t\t\t\theight: tick_height\n\t\t\t}))\n\t\t\t.addClass(tick_class)\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\t\tif(view_is('Month')) {\n\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\n\t\t\t} else {\n\t\t\t\ttick_x += self.config.column_width;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction make_grid_highlights() {\n\n\t\t// highlight today's date\n\t\tif(view_is('Day')) {\n\t\t\tconst x = moment().startOf('day').diff(self.gantt_start, 'hours') /\n\t\t\t\t\tself.config.step * self.config.column_width;\n\t\t\tconst y = 0;\n\t\t\tconst width = self.config.column_width;\n\t\t\tconst height = (self.config.bar.height + self.config.padding) * self.tasks.length +\n\t\t\t\tself.config.header_height + self.config.padding / 2;\n\n\t\t\tself.canvas.rect(x, y, width, height)\n\t\t\t\t.addClass('today-highlight')\n\t\t\t\t.appendTo(self.element_groups.grid);\n\t\t}\n\t}\n\n\tfunction make_dates() {\n\n\t\tfor(let date of get_dates_to_draw()) {\n\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text)\n\t\t\t\t.addClass('lower-text')\n\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\tif(date.upper_text) {\n\t\t\t\tconst $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\n\t\t\t\t\t.addClass('upper-text')\n\t\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\t\t// remove out-of-bound dates\n\t\t\t\tif($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n\t\t\t\t\t$upper_text.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction get_dates_to_draw() {\n\t\tlet last_date = null;\n\t\tconst dates = self.dates.map((date, i) => {\n\t\t\tconst d = get_date_info(date, last_date, i);\n\t\t\tlast_date = date;\n\t\t\treturn d;\n\t\t});\n\t\treturn dates;\n\t}\n\n\tfunction get_date_info(date, last_date, i) {\n\t\tif(!last_date) {\n\t\t\tlast_date = date.clone().add(1, 'year');\n\t\t}\n\t\tconst date_text = {\n\t\t\t'Quarter Day_lower': date.format('HH'),\n\t\t\t'Half Day_lower': date.format('HH'),\n\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n\t\t\t'Week_lower': 'Week ' + date.format('W'),\n\t\t\t'Month_lower': date.format('MMMM'),\n\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Half Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n\t\t};\n\n\t\tconst base_pos = {\n\t\t\tx: i * self.config.column_width,\n\t\t\tlower_y: self.config.header_height,\n\t\t\tupper_y: self.config.header_height - 25\n\t\t};\n\n\t\tconst x_pos = {\n\t\t\t'Quarter Day_lower': (self.config.column_width * 4) / 2,\n\t\t\t'Quarter Day_upper': 0,\n\t\t\t'Half Day_lower': (self.config.column_width * 2) / 2,\n\t\t\t'Half Day_upper': 0,\n\t\t\t'Day_lower': self.config.column_width / 2,\n\t\t\t'Day_upper': (self.config.column_width * 30) / 2,\n\t\t\t'Week_lower': self.config.column_width / 2,\n\t\t\t'Week_upper': (self.config.column_width * 4) / 2,\n\t\t\t'Month_lower': (date.daysInMonth() * self.config.column_width / 30) / 2,\n\t\t\t'Month_upper': (self.config.column_width * 12) / 2\n\t\t};\n\n\t\treturn {\n\t\t\tupper_text: date_text[`${self.config.view_mode}_upper`],\n\t\t\tlower_text: date_text[`${self.config.view_mode}_lower`],\n\t\t\tupper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\n\t\t\tupper_y: base_pos.upper_y,\n\t\t\tlower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\n\t\t\tlower_y: base_pos.lower_y\n\t\t};\n\t}\n\n\tfunction make_arrows() {\n\n\t\tfor(let task of self.tasks) {\n\t\t\tself._arrows = task.dependencies.map(dep => {\n\t\t\t\tconst dependency = get_task(dep);\n\t\t\t\tif(!dependency) return;\n\n\t\t\t\tconst arrow = Arrow(\n\t\t\t\t\tself, // gt\n\t\t\t\t\tself._bars[dependency._index], // from_task\n\t\t\t\t\tself._bars[task._index] // to_task\n\t\t\t\t);\n\t\t\t\tself.element_groups.arrow.add(arrow.element);\n\t\t\t\treturn arrow; // eslint-disable-line\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction make_bars() {\n\n\t\tself._bars = self.tasks.map((task) => {\n\t\t\tconst bar = Bar(self, task);\n\t\t\tself.element_groups.bar.add(bar.group);\n\t\t\treturn bar;\n\t\t});\n\t}\n\n\tfunction map_arrows_on_bars() {\n\n\t\tfor(let bar of self._bars) {\n\t\t\tbar.arrows = self._arrows.filter(arrow => {\n\t\t\t\treturn arrow.from_task.task.id === bar.task.id ||\n\t\t\t\t\tarrow.to_task.task.id === bar.task.id;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction setup_events() {\n\t\t// this._bars.forEach(function(bar) {\n\t\t// \tbar.events.on_date_change = me.events.bar_on_date_change;\n\t\t// \tbar.events.on_progress_change = me.events.bar_on_progress_change;\n\t\t// \tbar.click(me.events.bar_on_click);\n\t\t// });\n\t}\n\n\tfunction bind_grid_click() {\n\t\tself.element_groups.grid.click(() => {\n\t\t\tself.canvas.selectAll('.bar-wrapper').forEach(el => {\n\t\t\t\tel.removeClass('active');\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction view_is(modes) {\n\t\tif (typeof modes === 'string') {\n\t\t\treturn self.config.view_mode === modes;\n\t\t} else if(Array.isArray(modes)) {\n\t\t\tfor (let mode of modes) {\n\t\t\t\tif(self.config.view_mode === mode) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\tself.view_is = view_is;\n\n\tfunction get_task(id) {\n\t\tself.tasks.find((task) => {\n\t\t\treturn task.id === id;\n\t\t});\n\t}\n\n\tfunction get_bar(id) {\n\t\tself._bars.find((bar) => {\n\t\t\treturn bar.task.id === id;\n\t\t});\n\t}\n\tself.get_bar = get_bar; // required in Bar\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Gantt.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gantt.scss\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gantt #grid .grid-background {\\n  fill: none; }\\n\\n.gantt #grid .grid-header {\\n  fill: #ffffff;\\n  stroke: #e0e0e0;\\n  stroke-width: 1.4; }\\n\\n.gantt #grid .grid-row {\\n  fill: #ffffff; }\\n\\n.gantt #grid .grid-row:nth-child(even) {\\n  fill: #f5f5f5; }\\n\\n.gantt #grid .row-line {\\n  stroke: #ebeff2; }\\n\\n.gantt #grid .tick {\\n  stroke: #e0e0e0;\\n  stroke-width: 0.2; }\\n  .gantt #grid .tick.thick {\\n    stroke-width: 0.4; }\\n\\n.gantt #grid .today-highlight {\\n  fill: #fcf8e3;\\n  opacity: 0.5; }\\n\\n.gantt #arrow {\\n  fill: none;\\n  stroke: #666;\\n  stroke-width: 1.4; }\\n\\n.gantt .bar {\\n  fill: #b8c2cc;\\n  stroke: #8D99A6;\\n  stroke-width: 0;\\n  transition: stroke-width .3s ease; }\\n\\n.gantt .bar-progress {\\n  fill: #a3a3ff; }\\n\\n.gantt .bar-invalid {\\n  fill: transparent;\\n  stroke: #8D99A6;\\n  stroke-width: 1;\\n  stroke-dasharray: 5; }\\n  .gantt .bar-invalid ~ .bar-label {\\n    fill: #555; }\\n\\n.gantt .bar-label {\\n  fill: #fff;\\n  dominant-baseline: central;\\n  text-anchor: middle;\\n  font-size: 12px;\\n  font-weight: lighter;\\n  letter-spacing: 0.8px; }\\n  .gantt .bar-label.big {\\n    fill: #555;\\n    text-anchor: start; }\\n\\n.gantt .handle {\\n  fill: #ddd;\\n  cursor: ew-resize;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .3s ease; }\\n\\n.gantt .bar-wrapper {\\n  cursor: pointer; }\\n  .gantt .bar-wrapper:hover .bar {\\n    stroke-width: 2; }\\n  .gantt .bar-wrapper:hover .handle {\\n    visibility: visible;\\n    opacity: 1; }\\n  .gantt .bar-wrapper.active .bar {\\n    stroke-width: 2; }\\n\\n.gantt .primary-text, .gantt .secondary-text {\\n  font-size: 12px;\\n  text-anchor: middle; }\\n\\n.gantt .primary-text {\\n  fill: #555; }\\n\\n.gantt .secondary-text {\\n  fill: #333; }\\n\\n.gantt #details {\\n  font-size: 14; }\\n  .gantt #details .details-container {\\n    stroke: #e0e0e0;\\n    stroke-width: 1.1;\\n    fill: #fff; }\\n  .gantt #details .details-heading {\\n    fill: #333;\\n    font-weight: 500; }\\n  .gantt #details .details-body {\\n    fill: #555; }\\n\\n.gantt .hide {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"/./src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAYA;EAGG,WAAU,EACV;;AAJH;EAMG,cAAa;EACb,gBAjBmB;EAkBnB,kBAAiB,EACjB;;AATH;EAWG,cAAa,EACb;;AAZH;EAcG,cAvBe,EAwBf;;AAfH;EAiBG,gBAzByB,EA0BzB;;AAlBH;EAoBG,gBA9BmB;EA+BnB,kBAAiB,EAIjB;EAzBH;IAuBI,kBAAiB,EACjB;;AAxBJ;EA2BG,cAlCmB;EAmCnB,aAAY,EACZ;;AA7BH;EAiCE,WAAU;EACV,aAxCe;EAyCf,kBAAiB,EACjB;;AApCF;EAuCE,cAnDiB;EAoDjB,gBAnDkB;EAoDlB,gBAAe;EACf,kCAAiC,EACjC;;AA3CF;EA6CE,cAhDY,EAiDZ;;AA9CF;EAgDE,kBAAiB;EACjB,gBA5DkB;EA6DlB,gBAAe;EACf,oBAAmB,EAKnB;EAxDF;IAsDG,WA3Dc,EA4Dd;;AAvDH;EA0DE,WAAU;EACV,2BAA0B;EAC1B,oBAAmB;EACnB,gBAAe;EACf,qBAAoB;EACpB,sBAAqB,EAMrB;EArEF;IAkEG,WAvEc;IAwEd,mBAAkB,EAClB;;AApEH;EAwEE,WA1EiB;EA2EjB,kBAAiB;EACjB,WAAU;EACV,mBAAkB;EAClB,6BAA4B,EAC5B;;AA7EF;EAgFE,gBAAe,EAkBf;EAlGF;IAoFI,gBAAe,EACf;EArFJ;IAwFI,oBAAmB;IACnB,WAAU,EACV;EA1FJ;IA+FI,gBAAe,EACf;;AAhGJ;EAqGE,gBAAe;EACf,oBAAmB,EACnB;;AAvGF;EAyGE,WA9Ge,EA+Gf;;AA1GF;EA4GE,WAhHe,EAiHf;;AA7GF;EAgHE,cAAa,EAcb;EA9HF;IAmHG,gBA7HmB;IA8HnB,kBAAiB;IACjB,WAAU,EACV;EAtHH;IAwHG,WA5Hc;IA6Hd,iBAAgB,EAChB;EA1HH;IA4HG,WAjIc,EAkId;;AA7HH;EAiIE,cAAa,EACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fcf8e3;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$blue: #a3a3ff;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\t#grid {\\n\\t\\t.grid-background {\\n\\t\\t\\tfill: none;\\n\\t\\t}\\n\\t\\t.grid-header {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.4;\\n\\t\\t}\\n\\t\\t.grid-row {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t}\\n\\t\\t.grid-row:nth-child(even) {\\n\\t\\t\\tfill: $light-bg;\\n\\t\\t}\\n\\t\\t.row-line {\\n\\t\\t\\tstroke: $light-border-color;\\n\\t\\t}\\n\\t\\t.tick {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 0.2;\\n\\t\\t\\t&.thick {\\n\\t\\t\\t\\tstroke-width: 0.4;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t.today-highlight {\\n\\t\\t\\tfill: $light-yellow;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\tfill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: lighter;\\n\\t\\tletter-spacing: 0.8px;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.primary-text, .secondary-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.primary-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.secondary-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\n\\t#details {\\n\\t\\tfont-size: 14;\\n\\n\\t\\t.details-container {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.1;\\n\\t\\t\\tfill: #fff;\\n\\t\\t}\\n\\t\\t.details-heading {\\n\\t\\t\\tfill: $text-color;\\n\\t\\t\\tfont-weight: 500;\\n\\t\\t}\\n\\t\\t.details-body {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/sass-loader?sourceMap!./src/gantt.scss\n ** module id = 2\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/* global Snap */\n/*\n\tClass: Bar\n\n\tOpts:\n\t\tcanvas [reqd]\n\t\ttask [reqd]\n\t\tcolumn_width [reqd]\n\t\tx\n\t\ty\n*/\n\nexport default function Bar(gt, task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\tprepare();\n\t\tdraw();\n\t\tbind();\n\t}\n\n\tfunction set_defaults() {\n\t\tself.action_completed = false;\n\t\tself.task = task;\n\t}\n\n\tfunction prepare() {\n\t\tprepare_values();\n\t\tprepare_plugins();\n\t}\n\n\tfunction prepare_values() {\n\t\tself.invalid = self.task.invalid;\n\t\tself.height = gt.config.bar.height;\n\t\tself.x = compute_x();\n\t\tself.y = compute_y();\n\t\tself.corner_radius = 3;\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\tself.width = gt.config.column_width * self.duration;\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper');\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t}\n\n\tfunction prepare_plugins() {\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\tElement.prototype.getX = function () {\n\t\t\t\treturn +this.attr('x');\n\t\t\t};\n\t\t\tElement.prototype.getY = function () {\n\t\t\t\treturn +this.attr('y');\n\t\t\t};\n\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\treturn +this.attr('width');\n\t\t\t};\n\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\treturn +this.attr('height');\n\t\t\t};\n\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction draw() {\n\t\tdraw_bar();\n\t\tdraw_progress_bar();\n\t\tdraw_label();\n\t\tdraw_resize_handles();\n\t}\n\n\tfunction draw_bar() {\n\t\tself.$bar = gt.canvas.rect(self.x, self.y,\n\t\t\tself.width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar')\n\t\t\t.appendTo(self.bar_group);\n\t\tif (self.invalid) {\n\t\t\tself.$bar.addClass('bar-invalid');\n\t\t}\n\t}\n\n\tfunction draw_progress_bar() {\n\t\tif (self.invalid) return;\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\n\t\t\tself.progress_width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar-progress')\n\t\t\t.appendTo(self.bar_group);\n\t}\n\n\tfunction draw_label() {\n\t\tgt.canvas.text(self.x + self.width / 2,\n\t\t\tself.y + self.height / 2,\n\t\t\tself.task.name)\n\t\t\t.addClass('bar-label')\n\t\t\t.appendTo(self.bar_group);\n\t\tupdate_label_position();\n\t}\n\n\tfunction draw_resize_handles() {\n\t\tif (self.invalid) return;\n\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle_width = 8;\n\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle right')\n\t\t\t.appendTo(self.handle_group);\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle left')\n\t\t\t.appendTo(self.handle_group);\n\n\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\tgt.canvas.polygon(\n\t\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\n\t\t\t)\n\t\t\t\t.addClass('handle progress')\n\t\t\t\t.appendTo(self.handle_group);\n\t\t}\n\t}\n\n\t// function draw_invalid_bar() {\n\t// \tconst x = moment().startOf('day').diff(gt.gantt_start, 'hours') /\n\t// \t\tgt.config.step * gt.config.column_width;\n\n\t// \tgt.canvas.rect(x, self.y,\n\t// \t\tgt.config.column_width * 2, self.height,\n\t// \t\tself.corner_radius, self.corner_radius)\n\t// \t\t.addClass('bar-invalid')\n\t// \t\t.appendTo(self.bar_group);\n\n\t// \tgt.canvas.text(\n\t// \t\tx + gt.config.column_width,\n\t// \t\tself.y + self.height / 2,\n\t// \t\t'Dates not set')\n\t// \t\t.addClass('bar-label big')\n\t// \t\t.appendTo(self.bar_group);\n\t// }\n\n\tfunction bind() {\n\t\tif (self.invalid) return;\n\t\tshow_details();\n\t\tbind_resize();\n\t\tbind_drag();\n\t\tbind_resize_progress();\n\t}\n\n\tfunction show_details() {\n\t\tconst popover_group = gt.element_groups.details;\n\t\tlet details_box = popover_group.select('.details-wrapper');\n\n\t\tif (!details_box) {\n\t\t\tdetails_box = gt.canvas.group()\n\t\t\t\t.addClass('details-wrapper')\n\t\t\t\t.appendTo(popover_group);\n\t\t\tgt.canvas.rect(0, 0, 0, 110, 2, 2)\n\t\t\t\t.addClass('details-container')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 30 })\n\t\t\t\t.addClass('details-heading')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 65 })\n\t\t\t\t.addClass('details-body')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 90 })\n\t\t\t\t.addClass('details-body')\n\t\t\t\t.appendTo(details_box);\n\t\t}\n\n\t\tself.group.mouseover((e, x, y) => {\n\t\t\tpopover_group.removeClass('hide');\n\n\t\t\tconst pos = get_details_position();\n\t\t\tdetails_box.transform(`t${pos.x},${pos.y}`);\n\n\t\t\tconst start_date = self.task._start.format('MMM D'),\n\t\t\t\tend_date = self.task._end.format('MMM D'),\n\t\t\t\theading = `${self.task.name}: ${start_date} - ${end_date}`;\n\n\t\t\tconst $heading = popover_group\n\t\t\t\t.select('.details-heading')\n\t\t\t\t.attr('text', heading);\n\n\t\t\tconst bbox = $heading.getBBox();\n\t\t\tdetails_box.select('.details-container')\n\t\t\t\t.attr({ width: bbox.width + 20 });\n\n\t\t\tconst duration = self.task._end.diff(self.task._start, 'days'),\n\t\t\t\tbody1 = `Duration: ${duration} days`,\n\t\t\t\tbody2 = self.task.progress ?\n\t\t\t\t\t`Progress: ${self.task.progress}` : '';\n\n\t\t\tconst $body = popover_group.selectAll('.details-body');\n\t\t\t$body[0].attr('text', body1);\n\t\t\t$body[1].attr('text', body2);\n\t\t});\n\n\t\tself.group.mouseout(() => {\n\t\t\tsetTimeout(() => popover_group.addClass('hide'), 500);\n\t\t});\n\t}\n\n\tfunction get_details_position() {\n\t\treturn {\n\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\ty: self.$bar.getY() - 10\n\t\t};\n\t}\n\n\tfunction bind_resize() {\n\t\tconst { left, right } = get_handles();\n\n\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\tright.drag(onmove_right, onstart, onstop_right);\n\n\t\tfunction onstart() {\n\t\t\tonstart();\n\t\t\tthis.ox = this.getX();\n\t\t\tthis.oy = this.getY();\n\t\t}\n\n\t\tfunction onmove_right(dx, dy) {\n\t\t\tonmove_handle_right(dx, dy);\n\t\t}\n\t\tfunction onstop_right() {\n\t\t\tonstop_handle_right();\n\t\t}\n\n\t\tfunction onmove_left(dx, dy) {\n\t\t\tonmove_handle_left(dx, dy);\n\t\t}\n\t\tfunction onstop_left() {\n\t\t\tonstop_handle_left();\n\t\t}\n\t}\n\n\tfunction get_handles() {\n\t\treturn {\n\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\tright: self.handle_group.select('.handle.right')\n\t\t};\n\t}\n\n\tfunction bind_drag() {\n\t\tself.bar_group.drag(onmove, onstart, onstop);\n\n\t\tfunction onmove(dx, dy) {\n\t\t\tonmove(dx, dy);\n\t\t}\n\t\tfunction onstop() {\n\t\t\tonstop();\n\t\t}\n\t\tfunction onstart() {\n\t\t\tonstart();\n\t\t}\n\t}\n\n\tfunction bind_resize_progress() {\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle = self.group.select('.handle.progress');\n\t\thandle && handle.drag(onmove, onstart, onstop);\n\n\t\tfunction onmove(dx, dy) {\n\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t}\n\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t}\n\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\thandle.transform(`t{dx},0`);\n\t\t\tbar_progress.finaldx = dx;\n\t\t}\n\t\tfunction onstop() {\n\t\t\tif (!bar_progress.finaldx) return;\n\t\t\tprogress_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\tfunction onstart() {\n\t\t\tbar_progress.finaldx = 0;\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t}\n\t}\n\n\tfunction onstart() {\n\t\tconst bar = self.$bar;\n\t\tbar.ox = bar.getX();\n\t\tbar.oy = bar.getY();\n\t\tbar.owidth = bar.getWidth();\n\t\tbar.finaldx = 0;\n\t\trun_method_for_dependencies('onstart');\n\t}\n\tself.onstart = onstart;\n\n\tfunction onmove(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(bar.ox + bar.finaldx);\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove = onmove;\n\n\tfunction onstop() {\n\t\tconst bar = self.$bar;\n\t\tif (!bar.finaldx) return;\n\t\tdate_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop = onstop;\n\n\tfunction onmove_handle_left(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(bar.ox + bar.finaldx, bar.owidth - bar.finaldx);\n\t\trun_method_for_dependencies('onmove_handle_left', [dx, dy]);\n\t}\n\tself.onmove_handle_left = onmove_handle_left;\n\n\tfunction onstop_handle_left() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop_handle_left');\n\t}\n\tself.onstop_handle_left = onstop_handle_left;\n\n\tfunction run_method_for_dependencies(fn, args) {\n\t\tconst dm = gt.dependency_map;\n\t\tif (dm[self.task.id]) {\n\t\t\tfor (let deptask of dm[self.task.id]) {\n\t\t\t\tconst dt = gt.get_bar(deptask);\n\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onmove_handle_right(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(null, bar.owidth + bar.finaldx);\n\t}\n\n\tfunction onstop_handle_right() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t}\n\n\tfunction update_bar_position(x, width) {\n\t\tconst bar = self.$bar;\n\t\tif (x) update_attr(bar, 'x', x);\n\t\tif (width) update_attr(bar, 'width', width);\n\t\tupdate_label_position();\n\t\tupdate_handle_position();\n\t\tupdate_progressbar_position();\n\t\tupdate_arrow_position();\n\t\tupdate_details_position();\n\t}\n\n\t// function click(callback) {\n\t// \tself.group.click(function () {\n\t// \t\tif (self.action_completed) {\n\t// \t\t\t// just finished a move action, wait for a few seconds\n\t// \t\t\treturn;\n\t// \t\t}\n\t// \t\tif (self.group.hasClass('active')) {\n\t// \t\t\tcallback(self.task);\n\t// \t\t}\n\t// \t\tunselect_all();\n\t// \t\tself.group.toggleClass('active');\n\t// \t});\n\t// }\n\n\tfunction date_changed() {\n\t\tself.events.on_date_change &&\n\t\t\tself.events.on_date_change(\n\t\t\t\tself.task,\n\t\t\t\tcompute_start_date(),\n\t\t\t\tcompute_end_date()\n\t\t\t);\n\t}\n\n\tfunction progress_changed() {\n\t\tself.events.on_progress_change &&\n\t\t\tself.events.on_progress_change(\n\t\t\t\tself.task,\n\t\t\t\tcompute_progress()\n\t\t\t);\n\t}\n\n\tfunction set_action_completed() {\n\t\tself.action_completed = true;\n\t\tsetTimeout(() => self.action_completed = false, 2000);\n\t}\n\n\t// function compute_date(x) {\n\t// \tconst shift = (x - compute_x()) / gt.config.column_width;\n\t// \tconst date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t// \treturn date;\n\t// }\n\n\tfunction compute_start_date() {\n\t\tconst bar = self.$bar,\n\t\t\tshift = (bar.getX() - compute_x()) / gt.config.column_width,\n\t\t\tnew_start_date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t\treturn new_start_date;\n\t}\n\n\tfunction compute_end_date() {\n\t\tconst bar = self.$bar,\n\t\t\tog_x = compute_x() + self.duration * gt.config.column_width,\n\t\t\tfinal_x = bar.getEndX(),\n\t\t\tshift = (final_x - og_x) / gt.config.column_width,\n\t\t\tnew_end_date = self.task._end.clone().add(gt.config.step * shift, 'hours');\n\t\treturn new_end_date;\n\t}\n\n\tfunction compute_progress() {\n\t\treturn self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t}\n\n\tfunction compute_x() {\n\t\tlet x = self.task._start.diff(gt.gantt_start, 'hours') /\n\t\t\tgt.config.step * gt.config.column_width;\n\n\t\tif (gt.view_is('Month')) {\n\t\t\tx = self.task._start.diff(gt.config.start, 'days') *\n\t\t\t\tgt.config.column_width / 30;\n\t\t}\n\t\treturn x;\n\t}\n\n\tfunction compute_y() {\n\t\treturn gt.config.header_height + gt.config.padding +\n\t\t\tself.task._index * (self.height + gt.config.padding);\n\t}\n\n\tfunction get_snap_position(dx) {\n\t\tlet odx = dx, rem, position;\n\n\t\tif (gt.view_is('Week')) {\n\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\n\t\t} else if (gt.view_is('Month')) {\n\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\n\t\t} else {\n\t\t\trem = dx % gt.config.column_width;\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\n\t\t}\n\t\treturn position;\n\t}\n\n\tfunction update_attr(element, attr, value) {\n\t\tvalue = +value;\n\t\tif (!isNaN(value)) {\n\t\t\telement.attr(attr, value);\n\t\t}\n\t\treturn element;\n\t}\n\n\tfunction update_progressbar_position() {\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t}\n\n\tfunction update_label_position() {\n\t\tconst bar = self.$bar,\n\t\t\tlabel = self.group.select('.bar-label');\n\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t} else {\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t}\n\t}\n\n\tfunction update_handle_position() {\n\t\tconst bar = self.$bar;\n\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t'x': bar.getX() + 1\n\t\t});\n\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t'x': bar.getEndX() - 9\n\t\t});\n\t}\n\n\tfunction update_arrow_position() {\n\t\tfor (let arrow of self.arrows) {\n\t\t\tarrow.update();\n\t\t}\n\t}\n\n\tfunction update_details_position() {\n\t\tconst details_box = gt.element_groups.details.select('.details-wrapper');\n\t\tconst pos = get_details_position();\n\t\tdetails_box && details_box.transform(`t${pos.x},${pos.y}`);\n\t}\n\n\t// function unselect_all() {\n\t// \tgt.canvas.selectAll('.bar-wrapper').forEach(function (el) {\n\t// \t\tel.removeClass('active');\n\t// \t});\n\t// }\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Bar.js\n **/","/* global Snap */\n/*\n\tClass: Arrow\n\tfrom_task ---> to_task\n\n\tOpts:\n\t\tgantt (Gantt object)\n\t\tfrom_task (Bar object)\n\t\tto_task (Bar object)\n*/\n\nexport default function Arrow(gt, from_task, to_task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tself.from_task = from_task;\n\t\tself.to_task = to_task;\n\t\tprepare();\n\t\tdraw();\n\t}\n\n\tfunction prepare() {\n\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\n\t\tconst condition = () =>\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\n\n\t\twhile(condition()) {\n\t\t\tself.start_x -= 10;\n\t\t}\n\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\n\t\tself.curve = gt.config.arrow.curve;\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\tself.offset = from_is_below_to ?\n\t\t\tself.end_y + gt.config.arrow.curve :\n\t\t\tself.end_y - gt.config.arrow.curve;\n\n\t\tself.path =\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t{\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\tself.path =\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t\t{\n\t\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.get('height') / 2 - self.curve_y,\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\t\toffset: self.offset,\n\t\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction draw() {\n\t\tself.element = self.gantt.canvas.path(self.path)\n\t\t\t.attr('data-from', self.from_task.task.id)\n\t\t\t.attr('data-to', self.to_task.task.id);\n\t}\n\n\tfunction update() { // eslint-disable-line\n\t\tself.prepare();\n\t\tself.element.attr('d', self.path);\n\t}\n\tself.update = update;\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Arrow.js\n **/"],"sourceRoot":""}
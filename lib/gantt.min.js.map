{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///gantt.min.js","webpack:///webpack/bootstrap ece37a904e103d3105d7","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?b27d","webpack:///./src/gantt.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Bar.js","webpack:///./src/Arrow.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Gantt","element","tasks","config","init","set_defaults","change_view_mode","self","view_mode","defaults","header_height","column_width","step","view_modes","bar","height","arrow","curve","padding","date_format","_tasks","Object","assign","_bars","_arrows","element_groups","mode","set_scale","prepare","render","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","map","task","i","_start","moment","start","_end","end","_index","clone","add","startOf","invalid","deps","dependencies","split","d","trim","filter","dependency_map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","t","value","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","push","err","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","gantt_start","gantt_end","set_gantt_dates","setup_dates","canvas","Snap","addClass","clear","setup_groups","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","setup_events","set_width","set_scroll_position","bind_grid_click","view_is","subtract","endOf","dates","cur_date","groups","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","getBBox","parent_element","document","querySelector","parentElement","scroll_pos","get_min_date","diff","scrollLeft","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","length","grid_height","rect","appendTo","grid","header_width","rows","lines","row_width","row_height","row_y","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","line","tick_x","tick_y","tick_height","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","date","tick_class","day","month","path","format","x","y","daysInMonth","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","get_dates_to_draw","text","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","x2","remove","last_date","get_date_info","date_text","Quarter Day_lower","Half Day_lower","Day_lower","Week_lower","Month_lower","Quarter Day_upper","Half Day_upper","Day_upper","Week_upper","Month_upper","year","base_pos","x_pos","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_loop","dep","dependency","get_task","_Arrow2","_iterator8","_Bar2","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_loop2","arrows","from_task","to_task","_iterator9","click","selectAll","forEach","el","removeClass","modes","Array","isArray","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","find","get_bar","defineProperty","_Bar","_Arrow","content","locals","version","sources","names","mappings","file","sourcesContent","sourceRoot","list","toString","result","item","join","mediaQuery","alreadyImportedModules","addStylesToDom","styles","options","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","css","media","sourceMap","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","Error","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","type","createLinkElement","linkElement","rel","update","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","btoa","updateLink","href","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","memoize","fn","memo","apply","arguments","isOldIE","test","window","navigator","userAgent","toLowerCase","getElementsByTagName","newList","mayRemove","textStore","replacement","Boolean","Bar","gt","draw","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","bar_group","handle_group","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","$bar_progress","name","update_label_position","bar_progress","handle_width","polygon","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details","details_box","select","dx","dy","mouseover","e","pos","get_details_position","transform","start_date","end_date","heading","$heading","bbox","body1","body2","$body","mouseout","setTimeout","onstart","ox","oy","onmove_right","onmove_handle_right","onstop_right","onstop_handle_right","onmove_left","onmove_handle_left","onstop_left","onstop_handle_left","_get_handles","get_handles","left","right","drag","onmove","onstop","max_dx","min_dx","owidth","handle","finaldx","progress_changed","set_action_completed","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","args","dm","deptask","dt","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","events","on_date_change","compute_start_date","compute_end_date","on_progress_change","compute_progress","shift","new_start_date","og_x","final_x","new_end_date","odx","rem","position","isNaN","label","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2","get","gantt"],"mappings":"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","file":"gantt.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gantt\"] = factory();\n\telse\n\t\troot[\"gantt\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gantt\"] = factory();\n\telse\n\t\troot[\"gantt\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = Gantt;\n\t\n\t__webpack_require__(1);\n\t\n\tvar _Bar = __webpack_require__(5);\n\t\n\tvar _Bar2 = _interopRequireDefault(_Bar);\n\t\n\tvar _Arrow = __webpack_require__(6);\n\t\n\tvar _Arrow2 = _interopRequireDefault(_Arrow);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Gantt(element, tasks, config) {\n\t\n\t\tvar self = {};\n\t\n\t\tfunction init() {\n\t\t\tset_defaults();\n\t\t\t// initialize with default view mode\n\t\t\tchange_view_mode(self.config.view_mode);\n\t\t}\n\t\n\t\tfunction set_defaults() {\n\t\n\t\t\tvar defaults = {\n\t\t\t\theader_height: 50,\n\t\t\t\tcolumn_width: 30,\n\t\t\t\tstep: 24,\n\t\t\t\tview_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],\n\t\t\t\tbar: {\n\t\t\t\t\theight: 20\n\t\t\t\t},\n\t\t\t\tarrow: {\n\t\t\t\t\tcurve: 5\n\t\t\t\t},\n\t\t\t\tpadding: 18,\n\t\t\t\tview_mode: 'Day',\n\t\t\t\tdate_format: 'YYYY-MM-DD'\n\t\t\t};\n\t\n\t\t\tself.element = element;\n\t\t\tself._tasks = tasks;\n\t\t\tself.config = Object.assign({}, defaults, config);\n\t\n\t\t\tself._bars = [];\n\t\t\tself._arrows = [];\n\t\t\tself.element_groups = {};\n\t\t}\n\t\n\t\tfunction change_view_mode(mode) {\n\t\t\tset_scale(mode);\n\t\t\tprepare();\n\t\t\trender();\n\t\t}\n\t\n\t\tfunction prepare() {\n\t\t\tprepare_tasks();\n\t\t\tprepare_dependencies();\n\t\t\tprepare_dates();\n\t\t\tprepare_canvas();\n\t\t}\n\t\n\t\tfunction prepare_tasks() {\n\t\n\t\t\t// prepare tasks\n\t\t\tself.tasks = self._tasks.map(function (task, i) {\n\t\n\t\t\t\t// momentify\n\t\t\t\ttask._start = moment(task.start, self.config.date_format);\n\t\t\t\ttask._end = moment(task.end, self.config.date_format);\n\t\n\t\t\t\t// cache index\n\t\t\t\ttask._index = i;\n\t\n\t\t\t\t// invalid dates\n\t\t\t\tif (!task.start && !task.end) {\n\t\t\t\t\ttask._start = moment().startOf('day');\n\t\t\t\t\ttask._end = moment().startOf('day').add(2, 'days');\n\t\t\t\t} else if (!task.start) {\n\t\t\t\t\ttask._start = task._end.clone().add(-2, 'days');\n\t\t\t\t} else {\n\t\t\t\t\ttask._end = task._start.clone().add(2, 'days');\n\t\t\t\t}\n\t\n\t\t\t\t// invalid flag\n\t\t\t\tif (!task.start || !task.end) {\n\t\t\t\t\ttask.invalid = true;\n\t\t\t\t}\n\t\n\t\t\t\t// dependencies\n\t\t\t\tvar deps = void 0;\n\t\n\t\t\t\tif (task.dependencies) {\n\t\t\t\t\tdeps = task.dependencies.split(',').map(function (d) {\n\t\t\t\t\t\treturn d.trim();\n\t\t\t\t\t}).filter(function (d) {\n\t\t\t\t\t\treturn d;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdeps = [];\n\t\t\t\t}\n\t\t\t\ttask.dependencies = deps;\n\t\n\t\t\t\treturn task;\n\t\t\t});\n\t\t}\n\t\tfunction prepare_dependencies() {\n\t\n\t\t\tself.dependency_map = {};\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = self.tasks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar t = _step.value;\n\t\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator2 = t.dependencies[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\t\tvar d = _step2.value;\n\t\n\t\t\t\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\n\t\t\t\t\t\t\tself.dependency_map[d].push(t.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction prepare_dates() {\n\t\t\tvar _iteratorNormalCompletion3 = true;\n\t\t\tvar _didIteratorError3 = false;\n\t\t\tvar _iteratorError3 = undefined;\n\t\n\t\t\ttry {\n\t\n\t\t\t\tfor (var _iterator3 = self.tasks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\t\tvar task = _step3.value;\n\t\n\t\t\t\t\t// set global start and end date\n\t\t\t\t\tif (!self.gantt_start || task._start < self.gantt_start) {\n\t\t\t\t\t\tself.gantt_start = task._start;\n\t\t\t\t\t}\n\t\t\t\t\tif (!self.gantt_end || task._end > self.gantt_end) {\n\t\t\t\t\t\tself.gantt_end = task._end;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t_iteratorError3 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t\t_iterator3.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tset_gantt_dates();\n\t\t\tsetup_dates();\n\t\t}\n\t\n\t\tfunction prepare_canvas() {\n\t\t\tself.canvas = Snap(self.element).addClass('gantt');\n\t\t}\n\t\n\t\tfunction render() {\n\t\t\tclear();\n\t\t\tsetup_groups();\n\t\t\tmake_grid();\n\t\t\tmake_dates();\n\t\t\tmake_bars();\n\t\t\tmake_arrows();\n\t\t\tmap_arrows_on_bars();\n\t\t\tsetup_events();\n\t\t\tset_width();\n\t\t\tset_scroll_position();\n\t\t\tbind_grid_click();\n\t\t}\n\t\n\t\tfunction clear() {\n\t\t\tself.canvas.clear();\n\t\t\tself._bars = [];\n\t\t\tself._arrows = [];\n\t\t}\n\t\n\t\tfunction set_gantt_dates() {\n\t\n\t\t\tif (view_is(['Quarter Day', 'Half Day'])) {\n\t\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n\t\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\n\t\t\t} else if (view_is('Month')) {\n\t\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\n\t\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n\t\t\t} else {\n\t\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n\t\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setup_dates() {\n\t\n\t\t\tself.dates = [];\n\t\t\tvar cur_date = null;\n\t\n\t\t\twhile (cur_date === null || cur_date < self.gantt_end) {\n\t\t\t\tif (!cur_date) {\n\t\t\t\t\tcur_date = self.gantt_start.clone();\n\t\t\t\t} else {\n\t\t\t\t\tcur_date = view_is('Month') ? cur_date.clone().add(1, 'month') : cur_date.clone().add(self.config.step, 'hours');\n\t\t\t\t}\n\t\t\t\tself.dates.push(cur_date);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setup_groups() {\n\t\n\t\t\tvar groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n\t\t\t// make group layers\n\t\t\tvar _iteratorNormalCompletion4 = true;\n\t\t\tvar _didIteratorError4 = false;\n\t\t\tvar _iteratorError4 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator4 = groups[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t\t\t\t\tvar group = _step4.value;\n\t\n\t\t\t\t\tself.element_groups[group] = self.canvas.group().attr({ 'id': group });\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError4 = true;\n\t\t\t\t_iteratorError4 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t\t\t\t\t\t_iterator4.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError4) {\n\t\t\t\t\t\tthrow _iteratorError4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction set_scale(scale) {\n\t\t\tself.config.view_mode = scale;\n\t\n\t\t\t// fire viewmode_change event\n\t\t\t// self.events.on_viewmode_change(scale);\n\t\t\t// trigger(\"view_mode_change\");\n\t\n\t\t\tif (scale === 'Day') {\n\t\t\t\tself.config.step = 24;\n\t\t\t\tself.config.column_width = 38;\n\t\t\t} else if (scale === 'Half Day') {\n\t\t\t\tself.config.step = 24 / 2;\n\t\t\t\tself.config.column_width = 38;\n\t\t\t} else if (scale === 'Quarter Day') {\n\t\t\t\tself.config.step = 24 / 4;\n\t\t\t\tself.config.column_width = 38;\n\t\t\t} else if (scale === 'Week') {\n\t\t\t\tself.config.step = 24 * 7;\n\t\t\t\tself.config.column_width = 140;\n\t\t\t} else if (scale === 'Month') {\n\t\t\t\tself.config.step = 24 * 30;\n\t\t\t\tself.config.column_width = 120;\n\t\t\t}\n\t\t}\n\t\n\t\tfunction set_width() {\n\t\t\tvar cur_width = self.canvas.node.getBoundingClientRect().width;\n\t\t\tvar actual_width = self.canvas.getBBox().width;\n\t\t\tif (cur_width < actual_width) {\n\t\t\t\tself.canvas.attr('width', actual_width);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction set_scroll_position() {\n\t\t\tvar parent_element = document.querySelector(self.element).parentElement;\n\t\t\tif (!parent_element) return;\n\t\n\t\t\tvar scroll_pos = get_min_date().diff(self.gantt_start, 'hours') / self.config.step * self.config.column_width;\n\t\t\tparent_element.scrollLeft = scroll_pos;\n\t\t}\n\t\n\t\tfunction get_min_date() {\n\t\t\tvar task = self.tasks.reduce(function (acc, curr) {\n\t\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\n\t\t\t});\n\t\t\treturn task._start;\n\t\t}\n\t\n\t\tfunction make_grid() {\n\t\t\tmake_grid_background();\n\t\t\tmake_grid_rows();\n\t\t\tmake_grid_header();\n\t\t\tmake_grid_ticks();\n\t\t\tmake_grid_highlights();\n\t\t}\n\t\n\t\tfunction make_grid_background() {\n\t\n\t\t\tvar grid_width = self.dates.length * self.config.column_width,\n\t\t\t    grid_height = self.config.header_height + self.config.padding + (self.config.bar.height + self.config.padding) * self.tasks.length;\n\t\n\t\t\tself.canvas.rect(0, 0, grid_width, grid_height).addClass('grid-background').appendTo(self.element_groups.grid);\n\t\n\t\t\tself.canvas.attr({\n\t\t\t\theight: grid_height + self.config.padding,\n\t\t\t\twidth: '100%'\n\t\t\t});\n\t\t}\n\t\n\t\tfunction make_grid_header() {\n\t\t\tvar header_width = self.dates.length * self.config.column_width,\n\t\t\t    header_height = self.config.header_height + 10;\n\t\t\tself.canvas.rect(0, 0, header_width, header_height).addClass('grid-header').appendTo(self.element_groups.grid);\n\t\t}\n\t\n\t\tfunction make_grid_rows() {\n\t\n\t\t\tvar rows = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\t    lines = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\t    row_width = self.dates.length * self.config.column_width,\n\t\t\t    row_height = self.config.bar.height + self.config.padding;\n\t\n\t\t\tvar row_y = self.config.header_height + self.config.padding / 2;\n\t\n\t\t\tvar _iteratorNormalCompletion5 = true;\n\t\t\tvar _didIteratorError5 = false;\n\t\t\tvar _iteratorError5 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator5 = self.tasks[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n\t\t\t\t\tvar task = _step5.value;\n\t\t\t\t\t// eslint-disable-line\n\t\t\t\t\tself.canvas.rect(0, row_y, row_width, row_height).addClass('grid-row').appendTo(rows);\n\t\n\t\t\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height).addClass('row-line').appendTo(lines);\n\t\n\t\t\t\t\trow_y += self.config.bar.height + self.config.padding;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError5 = true;\n\t\t\t\t_iteratorError5 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion5 && _iterator5.return) {\n\t\t\t\t\t\t_iterator5.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError5) {\n\t\t\t\t\t\tthrow _iteratorError5;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction make_grid_ticks() {\n\t\t\tvar tick_x = 0,\n\t\t\t    tick_y = self.config.header_height + self.config.padding / 2,\n\t\t\t    tick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\n\t\n\t\t\tvar _iteratorNormalCompletion6 = true;\n\t\t\tvar _didIteratorError6 = false;\n\t\t\tvar _iteratorError6 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator6 = self.dates[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n\t\t\t\t\tvar date = _step6.value;\n\t\n\t\t\t\t\tvar tick_class = 'tick';\n\t\t\t\t\t// thick tick for monday\n\t\t\t\t\tif (view_is('Day') && date.day() === 1) {\n\t\t\t\t\t\ttick_class += ' thick';\n\t\t\t\t\t}\n\t\t\t\t\t// thick tick for first week\n\t\t\t\t\tif (view_is('Week') && date.date() >= 1 && date.date() < 8) {\n\t\t\t\t\t\ttick_class += ' thick';\n\t\t\t\t\t}\n\t\t\t\t\t// thick ticks for quarters\n\t\t\t\t\tif (view_is('Month') && date.month() % 3 === 0) {\n\t\t\t\t\t\ttick_class += ' thick';\n\t\t\t\t\t}\n\t\n\t\t\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\n\t\t\t\t\t\tx: tick_x,\n\t\t\t\t\t\ty: tick_y,\n\t\t\t\t\t\theight: tick_height\n\t\t\t\t\t})).addClass(tick_class).appendTo(self.element_groups.grid);\n\t\n\t\t\t\t\tif (view_is('Month')) {\n\t\t\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttick_x += self.config.column_width;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError6 = true;\n\t\t\t\t_iteratorError6 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion6 && _iterator6.return) {\n\t\t\t\t\t\t_iterator6.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError6) {\n\t\t\t\t\t\tthrow _iteratorError6;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction make_grid_highlights() {\n\t\n\t\t\t// highlight today's date\n\t\t\tif (view_is('Day')) {\n\t\t\t\tvar x = moment().startOf('day').diff(self.gantt_start, 'hours') / self.config.step * self.config.column_width;\n\t\t\t\tvar y = 0;\n\t\t\t\tvar width = self.config.column_width;\n\t\t\t\tvar height = (self.config.bar.height + self.config.padding) * self.tasks.length + self.config.header_height + self.config.padding / 2;\n\t\n\t\t\t\tself.canvas.rect(x, y, width, height).addClass('today-highlight').appendTo(self.element_groups.grid);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction make_dates() {\n\t\t\tvar _iteratorNormalCompletion7 = true;\n\t\t\tvar _didIteratorError7 = false;\n\t\t\tvar _iteratorError7 = undefined;\n\t\n\t\t\ttry {\n\t\n\t\t\t\tfor (var _iterator7 = get_dates_to_draw()[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n\t\t\t\t\tvar date = _step7.value;\n\t\n\t\t\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text).addClass('lower-text').appendTo(self.element_groups.date);\n\t\n\t\t\t\t\tif (date.upper_text) {\n\t\t\t\t\t\tvar $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text).addClass('upper-text').appendTo(self.element_groups.date);\n\t\n\t\t\t\t\t\t// remove out-of-bound dates\n\t\t\t\t\t\tif ($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n\t\t\t\t\t\t\t$upper_text.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError7 = true;\n\t\t\t\t_iteratorError7 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion7 && _iterator7.return) {\n\t\t\t\t\t\t_iterator7.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError7) {\n\t\t\t\t\t\tthrow _iteratorError7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction get_dates_to_draw() {\n\t\t\tvar last_date = null;\n\t\t\tvar dates = self.dates.map(function (date, i) {\n\t\t\t\tvar d = get_date_info(date, last_date, i);\n\t\t\t\tlast_date = date;\n\t\t\t\treturn d;\n\t\t\t});\n\t\t\treturn dates;\n\t\t}\n\t\n\t\tfunction get_date_info(date, last_date, i) {\n\t\t\tif (!last_date) {\n\t\t\t\tlast_date = date.clone().add(1, 'year');\n\t\t\t}\n\t\t\tvar date_text = {\n\t\t\t\t'Quarter Day_lower': date.format('HH'),\n\t\t\t\t'Half Day_lower': date.format('HH'),\n\t\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n\t\t\t\t'Week_lower': 'Week ' + date.format('W'),\n\t\t\t\t'Month_lower': date.format('MMMM'),\n\t\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t\t'Half Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t\t'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t\t'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n\t\t\t};\n\t\n\t\t\tvar base_pos = {\n\t\t\t\tx: i * self.config.column_width,\n\t\t\t\tlower_y: self.config.header_height,\n\t\t\t\tupper_y: self.config.header_height - 25\n\t\t\t};\n\t\n\t\t\tvar x_pos = {\n\t\t\t\t'Quarter Day_lower': self.config.column_width * 4 / 2,\n\t\t\t\t'Quarter Day_upper': 0,\n\t\t\t\t'Half Day_lower': self.config.column_width * 2 / 2,\n\t\t\t\t'Half Day_upper': 0,\n\t\t\t\t'Day_lower': self.config.column_width / 2,\n\t\t\t\t'Day_upper': self.config.column_width * 30 / 2,\n\t\t\t\t'Week_lower': self.config.column_width / 2,\n\t\t\t\t'Week_upper': self.config.column_width * 4 / 2,\n\t\t\t\t'Month_lower': date.daysInMonth() * self.config.column_width / 30 / 2,\n\t\t\t\t'Month_upper': self.config.column_width * 12 / 2\n\t\t\t};\n\t\n\t\t\treturn {\n\t\t\t\tupper_text: date_text[self.config.view_mode + '_upper'],\n\t\t\t\tlower_text: date_text[self.config.view_mode + '_lower'],\n\t\t\t\tupper_x: base_pos.x + x_pos[self.config.view_mode + '_upper'],\n\t\t\t\tupper_y: base_pos.upper_y,\n\t\t\t\tlower_x: base_pos.x + x_pos[self.config.view_mode + '_lower'],\n\t\t\t\tlower_y: base_pos.lower_y\n\t\t\t};\n\t\t}\n\t\n\t\tfunction make_arrows() {\n\t\t\tvar _iteratorNormalCompletion8 = true;\n\t\t\tvar _didIteratorError8 = false;\n\t\t\tvar _iteratorError8 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tvar _loop = function _loop() {\n\t\t\t\t\tvar task = _step8.value;\n\t\n\t\t\t\t\tself._arrows = task.dependencies.map(function (dep) {\n\t\t\t\t\t\tvar dependency = get_task(dep);\n\t\t\t\t\t\tif (!dependency) return;\n\t\n\t\t\t\t\t\tvar arrow = (0, _Arrow2.default)(self, // gt\n\t\t\t\t\t\tself._bars[dependency._index], // from_task\n\t\t\t\t\t\tself._bars[task._index] // to_task\n\t\t\t\t\t\t);\n\t\t\t\t\t\tself.element_groups.arrow.add(arrow.element);\n\t\t\t\t\t\treturn arrow; // eslint-disable-line\n\t\t\t\t\t});\n\t\t\t\t};\n\t\n\t\t\t\tfor (var _iterator8 = self.tasks[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n\t\t\t\t\t_loop();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError8 = true;\n\t\t\t\t_iteratorError8 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion8 && _iterator8.return) {\n\t\t\t\t\t\t_iterator8.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError8) {\n\t\t\t\t\t\tthrow _iteratorError8;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction make_bars() {\n\t\n\t\t\tself._bars = self.tasks.map(function (task) {\n\t\t\t\tvar bar = (0, _Bar2.default)(self, task);\n\t\t\t\tself.element_groups.bar.add(bar.group);\n\t\t\t\treturn bar;\n\t\t\t});\n\t\t}\n\t\n\t\tfunction map_arrows_on_bars() {\n\t\t\tvar _iteratorNormalCompletion9 = true;\n\t\t\tvar _didIteratorError9 = false;\n\t\t\tvar _iteratorError9 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tvar _loop2 = function _loop2() {\n\t\t\t\t\tvar bar = _step9.value;\n\t\n\t\t\t\t\tbar.arrows = self._arrows.filter(function (arrow) {\n\t\t\t\t\t\treturn arrow.from_task.task.id === bar.task.id || arrow.to_task.task.id === bar.task.id;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\n\t\t\t\tfor (var _iterator9 = self._bars[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n\t\t\t\t\t_loop2();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError9 = true;\n\t\t\t\t_iteratorError9 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion9 && _iterator9.return) {\n\t\t\t\t\t\t_iterator9.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError9) {\n\t\t\t\t\t\tthrow _iteratorError9;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction setup_events() {\n\t\t\t// this._bars.forEach(function(bar) {\n\t\t\t// \tbar.events.on_date_change = me.events.bar_on_date_change;\n\t\t\t// \tbar.events.on_progress_change = me.events.bar_on_progress_change;\n\t\t\t// \tbar.click(me.events.bar_on_click);\n\t\t\t// });\n\t\t}\n\t\n\t\tfunction bind_grid_click() {\n\t\t\tself.element_groups.grid.click(function () {\n\t\t\t\tself.canvas.selectAll('.bar-wrapper').forEach(function (el) {\n\t\t\t\t\tel.removeClass('active');\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\n\t\tfunction view_is(modes) {\n\t\t\tif (typeof modes === 'string') {\n\t\t\t\treturn self.config.view_mode === modes;\n\t\t\t} else if (Array.isArray(modes)) {\n\t\t\t\tvar _iteratorNormalCompletion10 = true;\n\t\t\t\tvar _didIteratorError10 = false;\n\t\t\t\tvar _iteratorError10 = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator10 = modes[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n\t\t\t\t\t\tvar mode = _step10.value;\n\t\n\t\t\t\t\t\tif (self.config.view_mode === mode) return true;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError10 = true;\n\t\t\t\t\t_iteratorError10 = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion10 && _iterator10.return) {\n\t\t\t\t\t\t\t_iterator10.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError10) {\n\t\t\t\t\t\t\tthrow _iteratorError10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tself.view_is = view_is;\n\t\n\t\tfunction get_task(id) {\n\t\t\tself.tasks.find(function (task) {\n\t\t\t\treturn task.id === id;\n\t\t\t});\n\t\t}\n\t\n\t\tfunction get_bar(id) {\n\t\t\tself._bars.find(function (bar) {\n\t\t\t\treturn bar.task.id === id;\n\t\t\t});\n\t\t}\n\t\tself.get_bar = get_bar; // required in Bar\n\t\n\t\tinit();\n\t\n\t\treturn self;\n\t} /* global moment, Snap */\n\t/**\n\t * Gantt:\n\t * \telement: querySelector string, required\n\t * \ttasks: array of tasks, required\n\t *   task: { id, name, start, end, progress, dependencies }\n\t * \tconfig: configuration options, optional\n\t */\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(2);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".gantt #grid .grid-background{fill:none}.gantt #grid .grid-header{fill:#fff;stroke:#e0e0e0;stroke-width:1.4}.gantt #grid .grid-row{fill:#fff}.gantt #grid .grid-row:nth-child(even){fill:#f5f5f5}.gantt #grid .row-line{stroke:#ebeff2}.gantt #grid .tick{stroke:#e0e0e0;stroke-width:.2}.gantt #grid .tick.thick{stroke-width:.4}.gantt #grid .today-highlight{fill:#fcf8e3;opacity:.5}.gantt #arrow{fill:none;stroke:#666;stroke-width:1.4}.gantt .bar{fill:#b8c2cc;stroke:#8d99a6;stroke-width:0;transition:stroke-width .3s ease}.gantt .bar-progress{fill:#a3a3ff}.gantt .bar-invalid{fill:transparent;stroke:#8d99a6;stroke-width:1;stroke-dasharray:5}.gantt .bar-invalid~.bar-label{fill:#555}.gantt .bar-label{fill:#fff;dominant-baseline:central;text-anchor:middle;font-size:12px;font-weight:lighter;letter-spacing:.8px}.gantt .bar-label.big{fill:#555;text-anchor:start}.gantt .handle{fill:#ddd;cursor:ew-resize;opacity:0;visibility:hidden;transition:opacity .3s ease}.gantt .bar-wrapper{cursor:pointer}.gantt .bar-wrapper:hover .bar{stroke-width:2}.gantt .bar-wrapper:hover .handle{visibility:visible;opacity:1}.gantt .bar-wrapper.active .bar{stroke-width:2}.gantt .primary-text,.gantt .secondary-text{font-size:12px;text-anchor:middle}.gantt .primary-text{fill:#555}.gantt .secondary-text{fill:#333}.gantt #details{font-size:14}.gantt #details .details-container{stroke:#e0e0e0;stroke-width:1.1;fill:#fff}.gantt #details .details-heading{fill:#333;font-weight:500}.gantt #details .details-body{fill:#555}.gantt .hide{display:none}\", \"\", {\"version\":3,\"sources\":[\"/./src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAYA,8BAGG,SAAU,CAHb,0BAMG,UACA,eACA,gBAAiB,CARpB,uBAWG,SAAa,CAXhB,uCAcG,YAvBe,CASlB,uBAiBG,cAzByB,CAQ5B,mBAoBG,eACA,eAAiB,CArBpB,yBAuBI,eAAiB,CAvBrB,8BA2BG,aACA,UAAY,CA5Bf,cAiCE,UACA,YACA,gBAAiB,CAnCnB,YAuCE,aACA,eACA,eACA,gCAAiC,CA1CnC,qBA6CE,YAhDY,CAGd,oBAgDE,iBACA,eACA,eACA,kBAAmB,CAnDrB,+BAsDG,SA3Dc,CAKjB,kBA0DE,UACA,0BACA,mBACA,eACA,oBACA,mBAAqB,CA/DvB,sBAkEG,UACA,iBAAkB,CAnErB,eAwEE,UACA,iBACA,UACA,kBACA,2BAA4B,CA5E9B,oBAgFE,cAAe,CAhFjB,+BAoFI,cAAe,CApFnB,kCAwFI,mBACA,SAAU,CAzFd,gCA+FI,cAAe,CA/FnB,4CAqGE,eACA,kBAAmB,CAtGrB,qBAyGE,SA9Ge,CAKjB,uBA4GE,SAhHe,CAIjB,gBAgHE,YAAa,CAhHf,mCAmHG,eACA,iBACA,SAAU,CArHb,iCAwHG,UACA,eAAgB,CAzHnB,8BA4HG,SAjIc,CAKjB,aAiIE,YAAa,CACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fcf8e3;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$blue: #a3a3ff;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\t#grid {\\n\\t\\t.grid-background {\\n\\t\\t\\tfill: none;\\n\\t\\t}\\n\\t\\t.grid-header {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.4;\\n\\t\\t}\\n\\t\\t.grid-row {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t}\\n\\t\\t.grid-row:nth-child(even) {\\n\\t\\t\\tfill: $light-bg;\\n\\t\\t}\\n\\t\\t.row-line {\\n\\t\\t\\tstroke: $light-border-color;\\n\\t\\t}\\n\\t\\t.tick {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 0.2;\\n\\t\\t\\t&.thick {\\n\\t\\t\\t\\tstroke-width: 0.4;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t.today-highlight {\\n\\t\\t\\tfill: $light-yellow;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\tfill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: lighter;\\n\\t\\tletter-spacing: 0.8px;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.primary-text, .secondary-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.primary-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.secondary-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\n\\t#details {\\n\\t\\tfont-size: 14;\\n\\n\\t\\t.details-container {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.1;\\n\\t\\t\\tfill: #fff;\\n\\t\\t}\\n\\t\\t.details-heading {\\n\\t\\t\\tfill: $text-color;\\n\\t\\t\\tfont-weight: 500;\\n\\t\\t}\\n\\t\\t.details-body {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = Bar;\n\t/* global Snap */\n\t/*\n\t\tClass: Bar\n\t\n\t\tOpts:\n\t\t\tcanvas [reqd]\n\t\t\ttask [reqd]\n\t\t\tcolumn_width [reqd]\n\t\t\tx\n\t\t\ty\n\t*/\n\t\n\tfunction Bar(gt, task) {\n\t\n\t\tvar self = {};\n\t\n\t\tfunction init() {\n\t\t\tset_defaults();\n\t\t\tprepare();\n\t\t\tdraw();\n\t\t\tbind();\n\t\t}\n\t\n\t\tfunction set_defaults() {\n\t\t\tself.action_completed = false;\n\t\t\tself.task = task;\n\t\t}\n\t\n\t\tfunction prepare() {\n\t\t\tprepare_values();\n\t\t\tprepare_plugins();\n\t\t}\n\t\n\t\tfunction prepare_values() {\n\t\t\tself.invalid = self.task.invalid;\n\t\t\tself.height = gt.config.bar.height;\n\t\t\tself.x = compute_x();\n\t\t\tself.y = compute_y();\n\t\t\tself.corner_radius = 3;\n\t\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\t\tself.width = gt.config.column_width * self.duration;\n\t\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\t\tself.group = gt.canvas.group().addClass('bar-wrapper');\n\t\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t\t}\n\t\n\t\tfunction prepare_plugins() {\n\t\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\t\tElement.prototype.getX = function () {\n\t\t\t\t\treturn +this.attr('x');\n\t\t\t\t};\n\t\t\t\tElement.prototype.getY = function () {\n\t\t\t\t\treturn +this.attr('y');\n\t\t\t\t};\n\t\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\t\treturn +this.attr('width');\n\t\t\t\t};\n\t\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\t\treturn +this.attr('height');\n\t\t\t\t};\n\t\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\n\t\tfunction draw() {\n\t\t\tdraw_bar();\n\t\t\tdraw_progress_bar();\n\t\t\tdraw_label();\n\t\t\tdraw_resize_handles();\n\t\t}\n\t\n\t\tfunction draw_bar() {\n\t\t\tself.$bar = gt.canvas.rect(self.x, self.y, self.width, self.height, self.corner_radius, self.corner_radius).addClass('bar').appendTo(self.bar_group);\n\t\t\tif (self.invalid) {\n\t\t\t\tself.$bar.addClass('bar-invalid');\n\t\t\t}\n\t\t}\n\t\n\t\tfunction draw_progress_bar() {\n\t\t\tif (self.invalid) return;\n\t\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y, self.progress_width, self.height, self.corner_radius, self.corner_radius).addClass('bar-progress').appendTo(self.bar_group);\n\t\t}\n\t\n\t\tfunction draw_label() {\n\t\t\tgt.canvas.text(self.x + self.width / 2, self.y + self.height / 2, self.task.name).addClass('bar-label').appendTo(self.bar_group);\n\t\t\tupdate_label_position();\n\t\t}\n\t\n\t\tfunction draw_resize_handles() {\n\t\t\tif (self.invalid) return;\n\t\n\t\t\tvar bar = self.$bar,\n\t\t\t    bar_progress = self.$bar_progress,\n\t\t\t    handle_width = 8;\n\t\n\t\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1, handle_width, self.height - 2, self.corner_radius, self.corner_radius).addClass('handle right').appendTo(self.handle_group);\n\t\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1, handle_width, self.height - 2, self.corner_radius, self.corner_radius).addClass('handle left').appendTo(self.handle_group);\n\t\n\t\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\t\tgt.canvas.polygon(bar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(), bar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(), bar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66).addClass('handle progress').appendTo(self.handle_group);\n\t\t\t}\n\t\t}\n\t\n\t\t// function draw_invalid_bar() {\n\t\t// \tconst x = moment().startOf('day').diff(gt.gantt_start, 'hours') /\n\t\t// \t\tgt.config.step * gt.config.column_width;\n\t\n\t\t// \tgt.canvas.rect(x, self.y,\n\t\t// \t\tgt.config.column_width * 2, self.height,\n\t\t// \t\tself.corner_radius, self.corner_radius)\n\t\t// \t\t.addClass('bar-invalid')\n\t\t// \t\t.appendTo(self.bar_group);\n\t\n\t\t// \tgt.canvas.text(\n\t\t// \t\tx + gt.config.column_width,\n\t\t// \t\tself.y + self.height / 2,\n\t\t// \t\t'Dates not set')\n\t\t// \t\t.addClass('bar-label big')\n\t\t// \t\t.appendTo(self.bar_group);\n\t\t// }\n\t\n\t\tfunction bind() {\n\t\t\tif (self.invalid) return;\n\t\t\tshow_details();\n\t\t\tbind_resize();\n\t\t\tbind_drag();\n\t\t\tbind_resize_progress();\n\t\t}\n\t\n\t\tfunction show_details() {\n\t\t\tvar popover_group = gt.element_groups.details;\n\t\t\tvar details_box = popover_group.select('.details-wrapper');\n\t\n\t\t\tif (!details_box) {\n\t\t\t\tdetails_box = gt.canvas.group().addClass('details-wrapper').appendTo(popover_group);\n\t\t\t\tgt.canvas.rect(0, 0, 0, 110, 2, 2).addClass('details-container').appendTo(details_box);\n\t\t\t\tgt.canvas.text(0, 0, '').attr({ dx: 10, dy: 30 }).addClass('details-heading').appendTo(details_box);\n\t\t\t\tgt.canvas.text(0, 0, '').attr({ dx: 10, dy: 65 }).addClass('details-body').appendTo(details_box);\n\t\t\t\tgt.canvas.text(0, 0, '').attr({ dx: 10, dy: 90 }).addClass('details-body').appendTo(details_box);\n\t\t\t}\n\t\n\t\t\tself.group.mouseover(function (e, x, y) {\n\t\t\t\tpopover_group.removeClass('hide');\n\t\n\t\t\t\tvar pos = get_details_position();\n\t\t\t\tdetails_box.transform('t' + pos.x + ',' + pos.y);\n\t\n\t\t\t\tvar start_date = self.task._start.format('MMM D'),\n\t\t\t\t    end_date = self.task._end.format('MMM D'),\n\t\t\t\t    heading = self.task.name + ': ' + start_date + ' - ' + end_date;\n\t\n\t\t\t\tvar $heading = popover_group.select('.details-heading').attr('text', heading);\n\t\n\t\t\t\tvar bbox = $heading.getBBox();\n\t\t\t\tdetails_box.select('.details-container').attr({ width: bbox.width + 20 });\n\t\n\t\t\t\tvar duration = self.task._end.diff(self.task._start, 'days'),\n\t\t\t\t    body1 = 'Duration: ' + duration + ' days',\n\t\t\t\t    body2 = self.task.progress ? 'Progress: ' + self.task.progress : '';\n\t\n\t\t\t\tvar $body = popover_group.selectAll('.details-body');\n\t\t\t\t$body[0].attr('text', body1);\n\t\t\t\t$body[1].attr('text', body2);\n\t\t\t});\n\t\n\t\t\tself.group.mouseout(function () {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\treturn popover_group.addClass('hide');\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t}\n\t\n\t\tfunction get_details_position() {\n\t\t\treturn {\n\t\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\t\ty: self.$bar.getY() - 10\n\t\t\t};\n\t\t}\n\t\n\t\tfunction bind_resize() {\n\t\t\tvar _get_handles = get_handles(),\n\t\t\t    left = _get_handles.left,\n\t\t\t    right = _get_handles.right;\n\t\n\t\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\t\tright.drag(onmove_right, onstart, onstop_right);\n\t\n\t\t\tfunction onstart() {\n\t\t\t\tonstart();\n\t\t\t\tthis.ox = this.getX();\n\t\t\t\tthis.oy = this.getY();\n\t\t\t}\n\t\n\t\t\tfunction onmove_right(dx, dy) {\n\t\t\t\tonmove_handle_right(dx, dy);\n\t\t\t}\n\t\t\tfunction onstop_right() {\n\t\t\t\tonstop_handle_right();\n\t\t\t}\n\t\n\t\t\tfunction onmove_left(dx, dy) {\n\t\t\t\tonmove_handle_left(dx, dy);\n\t\t\t}\n\t\t\tfunction onstop_left() {\n\t\t\t\tonstop_handle_left();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction get_handles() {\n\t\t\treturn {\n\t\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\t\tright: self.handle_group.select('.handle.right')\n\t\t\t};\n\t\t}\n\t\n\t\tfunction bind_drag() {\n\t\t\tself.bar_group.drag(onmove, onstart, onstop);\n\t\n\t\t\tfunction onmove(dx, dy) {\n\t\t\t\tonmove(dx, dy);\n\t\t\t}\n\t\t\tfunction onstop() {\n\t\t\t\tonstop();\n\t\t\t}\n\t\t\tfunction onstart() {\n\t\t\t\tonstart();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction bind_resize_progress() {\n\t\t\tvar bar = self.$bar,\n\t\t\t    bar_progress = self.$bar_progress,\n\t\t\t    handle = self.group.select('.handle.progress');\n\t\t\thandle && handle.drag(onmove, onstart, onstop);\n\t\n\t\t\tfunction onmove(dx, dy) {\n\t\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t\t}\n\t\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t\t}\n\t\n\t\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\t\thandle.transform('t{dx},0');\n\t\t\t\tbar_progress.finaldx = dx;\n\t\t\t}\n\t\t\tfunction onstop() {\n\t\t\t\tif (!bar_progress.finaldx) return;\n\t\t\t\tprogress_changed();\n\t\t\t\tset_action_completed();\n\t\t\t}\n\t\t\tfunction onstart() {\n\t\t\t\tbar_progress.finaldx = 0;\n\t\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t\t}\n\t\t}\n\t\n\t\tfunction onstart() {\n\t\t\tvar bar = self.$bar;\n\t\t\tbar.ox = bar.getX();\n\t\t\tbar.oy = bar.getY();\n\t\t\tbar.owidth = bar.getWidth();\n\t\t\tbar.finaldx = 0;\n\t\t\trun_method_for_dependencies('onstart');\n\t\t}\n\t\tself.onstart = onstart;\n\t\n\t\tfunction onmove(dx, dy) {\n\t\t\tvar bar = self.$bar;\n\t\t\tbar.finaldx = get_snap_position(dx);\n\t\t\tupdate_bar_position(bar.ox + bar.finaldx);\n\t\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t\t}\n\t\tself.onmove = onmove;\n\t\n\t\tfunction onstop() {\n\t\t\tvar bar = self.$bar;\n\t\t\tif (!bar.finaldx) return;\n\t\t\tdate_changed();\n\t\t\tset_action_completed();\n\t\t\trun_method_for_dependencies('onstop');\n\t\t}\n\t\tself.onstop = onstop;\n\t\n\t\tfunction onmove_handle_left(dx, dy) {\n\t\t\tvar bar = self.$bar;\n\t\t\tbar.finaldx = get_snap_position(dx);\n\t\t\tupdate_bar_position(bar.ox + bar.finaldx, bar.owidth - bar.finaldx);\n\t\t\trun_method_for_dependencies('onmove_handle_left', [dx, dy]);\n\t\t}\n\t\tself.onmove_handle_left = onmove_handle_left;\n\t\n\t\tfunction onstop_handle_left() {\n\t\t\tvar bar = self.$bar;\n\t\t\tif (bar.finaldx) date_changed();\n\t\t\tset_action_completed();\n\t\t\trun_method_for_dependencies('onstop_handle_left');\n\t\t}\n\t\tself.onstop_handle_left = onstop_handle_left;\n\t\n\t\tfunction run_method_for_dependencies(fn, args) {\n\t\t\tvar dm = gt.dependency_map;\n\t\t\tif (dm[self.task.id]) {\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = dm[self.task.id][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar deptask = _step.value;\n\t\n\t\t\t\t\t\tvar dt = gt.get_bar(deptask);\n\t\t\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction onmove_handle_right(dx, dy) {\n\t\t\tvar bar = self.$bar;\n\t\t\tbar.finaldx = get_snap_position(dx);\n\t\t\tupdate_bar_position(null, bar.owidth + bar.finaldx);\n\t\t}\n\t\n\t\tfunction onstop_handle_right() {\n\t\t\tvar bar = self.$bar;\n\t\t\tif (bar.finaldx) date_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\n\t\tfunction update_bar_position(x, width) {\n\t\t\tvar bar = self.$bar;\n\t\t\tif (x) update_attr(bar, 'x', x);\n\t\t\tif (width) update_attr(bar, 'width', width);\n\t\t\tupdate_label_position();\n\t\t\tupdate_handle_position();\n\t\t\tupdate_progressbar_position();\n\t\t\tupdate_arrow_position();\n\t\t\tupdate_details_position();\n\t\t}\n\t\n\t\t// function click(callback) {\n\t\t// \tself.group.click(function () {\n\t\t// \t\tif (self.action_completed) {\n\t\t// \t\t\t// just finished a move action, wait for a few seconds\n\t\t// \t\t\treturn;\n\t\t// \t\t}\n\t\t// \t\tif (self.group.hasClass('active')) {\n\t\t// \t\t\tcallback(self.task);\n\t\t// \t\t}\n\t\t// \t\tunselect_all();\n\t\t// \t\tself.group.toggleClass('active');\n\t\t// \t});\n\t\t// }\n\t\n\t\tfunction date_changed() {\n\t\t\tself.events.on_date_change && self.events.on_date_change(self.task, compute_start_date(), compute_end_date());\n\t\t}\n\t\n\t\tfunction progress_changed() {\n\t\t\tself.events.on_progress_change && self.events.on_progress_change(self.task, compute_progress());\n\t\t}\n\t\n\t\tfunction set_action_completed() {\n\t\t\tself.action_completed = true;\n\t\t\tsetTimeout(function () {\n\t\t\t\treturn self.action_completed = false;\n\t\t\t}, 2000);\n\t\t}\n\t\n\t\t// function compute_date(x) {\n\t\t// \tconst shift = (x - compute_x()) / gt.config.column_width;\n\t\t// \tconst date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t\t// \treturn date;\n\t\t// }\n\t\n\t\tfunction compute_start_date() {\n\t\t\tvar bar = self.$bar,\n\t\t\t    shift = (bar.getX() - compute_x()) / gt.config.column_width,\n\t\t\t    new_start_date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t\t\treturn new_start_date;\n\t\t}\n\t\n\t\tfunction compute_end_date() {\n\t\t\tvar bar = self.$bar,\n\t\t\t    og_x = compute_x() + self.duration * gt.config.column_width,\n\t\t\t    final_x = bar.getEndX(),\n\t\t\t    shift = (final_x - og_x) / gt.config.column_width,\n\t\t\t    new_end_date = self.task._end.clone().add(gt.config.step * shift, 'hours');\n\t\t\treturn new_end_date;\n\t\t}\n\t\n\t\tfunction compute_progress() {\n\t\t\treturn self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t\t}\n\t\n\t\tfunction compute_x() {\n\t\t\tvar x = self.task._start.diff(gt.gantt_start, 'hours') / gt.config.step * gt.config.column_width;\n\t\n\t\t\tif (gt.view_is('Month')) {\n\t\t\t\tx = self.task._start.diff(gt.config.start, 'days') * gt.config.column_width / 30;\n\t\t\t}\n\t\t\treturn x;\n\t\t}\n\t\n\t\tfunction compute_y() {\n\t\t\treturn gt.config.header_height + gt.config.padding + self.task._index * (self.height + gt.config.padding);\n\t\t}\n\t\n\t\tfunction get_snap_position(dx) {\n\t\t\tvar odx = dx,\n\t\t\t    rem = void 0,\n\t\t\t    position = void 0;\n\t\n\t\t\tif (gt.view_is('Week')) {\n\t\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\t\tposition = odx - rem + (rem < gt.config.column_width / 14 ? 0 : gt.config.column_width / 7);\n\t\t\t} else if (gt.view_is('Month')) {\n\t\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\t\tposition = odx - rem + (rem < gt.config.column_width / 60 ? 0 : gt.config.column_width / 30);\n\t\t\t} else {\n\t\t\t\trem = dx % gt.config.column_width;\n\t\t\t\tposition = odx - rem + (rem < gt.config.column_width / 2 ? 0 : gt.config.column_width);\n\t\t\t}\n\t\t\treturn position;\n\t\t}\n\t\n\t\tfunction update_attr(element, attr, value) {\n\t\t\tvalue = +value;\n\t\t\tif (!isNaN(value)) {\n\t\t\t\telement.attr(attr, value);\n\t\t\t}\n\t\t\treturn element;\n\t\t}\n\t\n\t\tfunction update_progressbar_position() {\n\t\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t\t}\n\t\n\t\tfunction update_label_position() {\n\t\t\tvar bar = self.$bar,\n\t\t\t    label = self.group.select('.bar-label');\n\t\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t\t} else {\n\t\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction update_handle_position() {\n\t\t\tvar bar = self.$bar;\n\t\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t\t'x': bar.getX() + 1\n\t\t\t});\n\t\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t\t'x': bar.getEndX() - 9\n\t\t\t});\n\t\t}\n\t\n\t\tfunction update_arrow_position() {\n\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\tvar _didIteratorError2 = false;\n\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\ttry {\n\t\t\t\tfor (var _iterator2 = self.arrows[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\tvar arrow = _step2.value;\n\t\n\t\t\t\t\tarrow.update();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t_iteratorError2 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction update_details_position() {\n\t\t\tvar details_box = gt.element_groups.details.select('.details-wrapper');\n\t\t\tvar pos = get_details_position();\n\t\t\tdetails_box && details_box.transform('t' + pos.x + ',' + pos.y);\n\t\t}\n\t\n\t\t// function unselect_all() {\n\t\t// \tgt.canvas.selectAll('.bar-wrapper').forEach(function (el) {\n\t\t// \t\tel.removeClass('active');\n\t\t// \t});\n\t\t// }\n\t\n\t\tinit();\n\t\n\t\treturn self;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = Arrow;\n\t/* global Snap */\n\t/*\n\t\tClass: Arrow\n\t\tfrom_task ---> to_task\n\t\n\t\tOpts:\n\t\t\tgantt (Gantt object)\n\t\t\tfrom_task (Bar object)\n\t\t\tto_task (Bar object)\n\t*/\n\t\n\tfunction Arrow(gt, from_task, to_task) {\n\t\n\t\tvar self = {};\n\t\n\t\tfunction init() {\n\t\t\tself.from_task = from_task;\n\t\t\tself.to_task = to_task;\n\t\t\tprepare();\n\t\t\tdraw();\n\t\t}\n\t\n\t\tfunction prepare() {\n\t\n\t\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\t\n\t\t\tvar condition = function condition() {\n\t\t\t\treturn to_task.$bar.getX() < self.start_x + gt.config.padding && self.start_x > from_task.$bar.getX() + gt.config.padding;\n\t\t\t};\n\t\n\t\t\twhile (condition()) {\n\t\t\t\tself.start_x -= 10;\n\t\t\t}\n\t\n\t\t\tself.start_y = gt.config.header_height + gt.config.bar.height + (gt.config.padding + gt.config.bar.height) * from_task.task._index + gt.config.padding;\n\t\n\t\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 + (gt.config.padding + gt.config.bar.height) * to_task.task._index + gt.config.padding;\n\t\n\t\t\tvar from_is_below_to = from_task.task._index > to_task.task._index;\n\t\t\tself.curve = gt.config.arrow.curve;\n\t\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\t\tself.offset = from_is_below_to ? self.end_y + gt.config.arrow.curve : self.end_y - gt.config.arrow.curve;\n\t\n\t\t\tself.path = Snap.format('M {start_x} {start_y} V {offset} ' + 'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' + 'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5', {\n\t\t\t\tstart_x: self.start_x,\n\t\t\t\tstart_y: self.start_y,\n\t\t\t\tend_x: self.end_x,\n\t\t\t\tend_y: self.end_y,\n\t\t\t\toffset: self.offset,\n\t\t\t\tcurve: self.curve,\n\t\t\t\tclockwise: self.clockwise,\n\t\t\t\tcurve_y: self.curve_y\n\t\t\t});\n\t\n\t\t\tif (to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\t\tself.path = Snap.format('M {start_x} {start_y} v {down_1} ' + 'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' + 'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' + 'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' + 'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5', {\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.get('height') / 2 - self.curve_y,\n\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\n\t\tfunction draw() {\n\t\t\tself.element = self.gantt.canvas.path(self.path).attr('data-from', self.from_task.task.id).attr('data-to', self.to_task.task.id);\n\t\t}\n\t\n\t\tfunction update() {\n\t\t\t// eslint-disable-line\n\t\t\tself.prepare();\n\t\t\tself.element.attr('d', self.path);\n\t\t}\n\t\tself.update = update;\n\t\n\t\tinit();\n\t\n\t\treturn self;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** gantt.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ece37a904e103d3105d7\n **/","/* global moment, Snap */\n/**\n * Gantt:\n * \telement: querySelector string, required\n * \ttasks: array of tasks, required\n *   task: { id, name, start, end, progress, dependencies }\n * \tconfig: configuration options, optional\n */\nimport './gantt.scss';\n\nimport Bar from './Bar';\nimport Arrow from './Arrow';\n\nexport default function Gantt(element, tasks, config) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\t// initialize with default view mode\n\t\tchange_view_mode(self.config.view_mode);\n\t}\n\n\tfunction set_defaults() {\n\n\t\tconst defaults = {\n\t\t\theader_height: 50,\n\t\t\tcolumn_width: 30,\n\t\t\tstep: 24,\n\t\t\tview_modes: [\n\t\t\t\t'Quarter Day',\n\t\t\t\t'Half Day',\n\t\t\t\t'Day',\n\t\t\t\t'Week',\n\t\t\t\t'Month'\n\t\t\t],\n\t\t\tbar: {\n\t\t\t\theight: 20\n\t\t\t},\n\t\t\tarrow: {\n\t\t\t\tcurve: 5\n\t\t\t},\n\t\t\tpadding: 18,\n\t\t\tview_mode: 'Day',\n\t\t\tdate_format: 'YYYY-MM-DD'\n\t\t};\n\n\t\tself.element = element;\n\t\tself._tasks = tasks;\n\t\tself.config = Object.assign({}, defaults, config);\n\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t\tself.element_groups = {};\n\t}\n\n\tfunction change_view_mode(mode) {\n\t\tset_scale(mode);\n\t\tprepare();\n\t\trender();\n\t}\n\n\tfunction prepare() {\n\t\tprepare_tasks();\n\t\tprepare_dependencies();\n\t\tprepare_dates();\n\t\tprepare_canvas();\n\t}\n\n\tfunction prepare_tasks() {\n\n\t\t// prepare tasks\n\t\tself.tasks = self._tasks.map((task, i) => {\n\n\t\t\t// momentify\n\t\t\ttask._start = moment(task.start, self.config.date_format);\n\t\t\ttask._end = moment(task.end, self.config.date_format);\n\n\t\t\t// cache index\n\t\t\ttask._index = i;\n\n\t\t\t// invalid dates\n\t\t\tif(!task.start && !task.end) {\n\t\t\t\ttask._start = moment().startOf('day');\n\t\t\t\ttask._end = moment().startOf('day').add(2, 'days');\n\t\t\t} else if(!task.start) {\n\t\t\t\ttask._start = task._end.clone().add(-2, 'days');\n\t\t\t} else {\n\t\t\t\ttask._end = task._start.clone().add(2, 'days');\n\t\t\t}\n\n\t\t\t// invalid flag\n\t\t\tif(!task.start || !task.end) {\n\t\t\t\ttask.invalid = true;\n\t\t\t}\n\n\t\t\t// dependencies\n\t\t\tlet deps;\n\n\t\t\tif(task.dependencies) {\n\t\t\t\tdeps = task.dependencies\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map(d => d.trim())\n\t\t\t\t\t.filter((d) => d);\n\t\t\t} else {\n\t\t\t\tdeps = [];\n\t\t\t}\n\t\t\ttask.dependencies = deps;\n\n\t\t\treturn task;\n\t\t});\n\t}\n\tfunction prepare_dependencies() {\n\n\t\tself.dependency_map = {};\n\t\tfor(let t of self.tasks) {\n\t\t\tfor(let d of t.dependencies) {\n\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\n\t\t\t\tself.dependency_map[d].push(t.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prepare_dates() {\n\n\t\tfor(let task of self.tasks) {\n\t\t\t// set global start and end date\n\t\t\tif(!self.gantt_start || task._start < self.gantt_start) {\n\t\t\t\tself.gantt_start = task._start;\n\t\t\t}\n\t\t\tif(!self.gantt_end || task._end > self.gantt_end) {\n\t\t\t\tself.gantt_end = task._end;\n\t\t\t}\n\t\t}\n\t\tset_gantt_dates();\n\t\tsetup_dates();\n\t}\n\n\tfunction prepare_canvas() {\n\t\tself.canvas = Snap(self.element).addClass('gantt');\n\t}\n\n\tfunction render() {\n\t\tclear();\n\t\tsetup_groups();\n\t\tmake_grid();\n\t\tmake_dates();\n\t\tmake_bars();\n\t\tmake_arrows();\n\t\tmap_arrows_on_bars();\n\t\tsetup_events();\n\t\tset_width();\n\t\tset_scroll_position();\n\t\tbind_grid_click();\n\t}\n\n\tfunction clear() {\n\t\tself.canvas.clear();\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t}\n\n\tfunction set_gantt_dates() {\n\n\t\tif(view_is(['Quarter Day', 'Half Day'])) {\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\n\t\t} else if(view_is('Month')) {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n\t\t} else {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n\t\t}\n\t}\n\n\tfunction setup_dates() {\n\n\t\tself.dates = [];\n\t\tlet cur_date = null;\n\n\t\twhile(cur_date === null || cur_date < self.gantt_end) {\n\t\t\tif(!cur_date) {\n\t\t\t\tcur_date = self.gantt_start.clone();\n\t\t\t} else {\n\t\t\t\tcur_date = view_is('Month') ?\n\t\t\t\t\tcur_date.clone().add(1, 'month') :\n\t\t\t\t\tcur_date.clone().add(self.config.step, 'hours');\n\t\t\t}\n\t\t\tself.dates.push(cur_date);\n\t\t}\n\t}\n\n\tfunction setup_groups() {\n\n\t\tconst groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n\t\t// make group layers\n\t\tfor(let group of groups) {\n\t\t\tself.element_groups[group] = self.canvas.group().attr({'id': group});\n\t\t}\n\t}\n\n\tfunction set_scale(scale) {\n\t\tself.config.view_mode = scale;\n\n\t\t// fire viewmode_change event\n\t\t// self.events.on_viewmode_change(scale);\n\t\t// trigger(\"view_mode_change\");\n\n\t\tif(scale === 'Day') {\n\t\t\tself.config.step = 24;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Half Day') {\n\t\t\tself.config.step = 24 / 2;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Quarter Day') {\n\t\t\tself.config.step = 24 / 4;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Week') {\n\t\t\tself.config.step = 24 * 7;\n\t\t\tself.config.column_width = 140;\n\t\t} else if(scale === 'Month') {\n\t\t\tself.config.step = 24 * 30;\n\t\t\tself.config.column_width = 120;\n\t\t}\n\t}\n\n\tfunction set_width() {\n\t\tconst cur_width = self.canvas.node.getBoundingClientRect().width;\n\t\tconst actual_width = self.canvas.getBBox().width;\n\t\tif(cur_width < actual_width) {\n\t\t\tself.canvas.attr('width', actual_width);\n\t\t}\n\t}\n\n\tfunction set_scroll_position() {\n\t\tconst parent_element = document.querySelector(self.element).parentElement;\n\t\tif(!parent_element) return;\n\n\t\tconst scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\n\t\t\tself.config.step * self.config.column_width;\n\t\tparent_element.scrollLeft = scroll_pos;\n\t}\n\n\tfunction get_min_date() {\n\t\tconst task = self.tasks.reduce((acc, curr) => {\n\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\n\t\t});\n\t\treturn task._start;\n\t}\n\n\tfunction make_grid() {\n\t\tmake_grid_background();\n\t\tmake_grid_rows();\n\t\tmake_grid_header();\n\t\tmake_grid_ticks();\n\t\tmake_grid_highlights();\n\t}\n\n\tfunction make_grid_background() {\n\n\t\tconst grid_width = self.dates.length * self.config.column_width,\n\t\t\tgrid_height = self.config.header_height + self.config.padding +\n\t\t\t\t(self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tself.canvas.rect(0, 0, grid_width, grid_height)\n\t\t\t.addClass('grid-background')\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\tself.canvas.attr({\n\t\t\theight: grid_height + self.config.padding,\n\t\t\twidth: '100%'\n\t\t});\n\t}\n\n\tfunction make_grid_header() {\n\t\tconst header_width = self.dates.length * self.config.column_width,\n\t\t\theader_height = self.config.header_height + 10;\n\t\tself.canvas.rect(0, 0, header_width, header_height)\n\t\t\t.addClass('grid-header')\n\t\t\t.appendTo(self.element_groups.grid);\n\t}\n\n\tfunction make_grid_rows() {\n\n\t\tconst rows = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\tlines = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\trow_width = self.dates.length * self.config.column_width,\n\t\t\trow_height = self.config.bar.height + self.config.padding;\n\n\t\tlet row_y = self.config.header_height + self.config.padding / 2;\n\n\t\tfor(let task of self.tasks) { // eslint-disable-line\n\t\t\tself.canvas.rect(0, row_y, row_width, row_height)\n\t\t\t\t.addClass('grid-row')\n\t\t\t\t.appendTo(rows);\n\n\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\n\t\t\t\t.addClass('row-line')\n\t\t\t\t.appendTo(lines);\n\n\t\t\trow_y += self.config.bar.height + self.config.padding;\n\t\t}\n\t}\n\n\tfunction make_grid_ticks() {\n\t\tlet tick_x = 0,\n\t\t\ttick_y = self.config.header_height + self.config.padding / 2,\n\t\t\ttick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tfor(let date of self.dates) {\n\t\t\tlet tick_class = 'tick';\n\t\t\t// thick tick for monday\n\t\t\tif(view_is('Day') && date.day() === 1) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick tick for first week\n\t\t\tif(view_is('Week') && date.date() >= 1 && date.date() < 8) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick ticks for quarters\n\t\t\tif(view_is('Month') && date.month() % 3 === 0) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\n\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\n\t\t\t\tx: tick_x,\n\t\t\t\ty: tick_y,\n\t\t\t\theight: tick_height\n\t\t\t}))\n\t\t\t.addClass(tick_class)\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\t\tif(view_is('Month')) {\n\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\n\t\t\t} else {\n\t\t\t\ttick_x += self.config.column_width;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction make_grid_highlights() {\n\n\t\t// highlight today's date\n\t\tif(view_is('Day')) {\n\t\t\tconst x = moment().startOf('day').diff(self.gantt_start, 'hours') /\n\t\t\t\t\tself.config.step * self.config.column_width;\n\t\t\tconst y = 0;\n\t\t\tconst width = self.config.column_width;\n\t\t\tconst height = (self.config.bar.height + self.config.padding) * self.tasks.length +\n\t\t\t\tself.config.header_height + self.config.padding / 2;\n\n\t\t\tself.canvas.rect(x, y, width, height)\n\t\t\t\t.addClass('today-highlight')\n\t\t\t\t.appendTo(self.element_groups.grid);\n\t\t}\n\t}\n\n\tfunction make_dates() {\n\n\t\tfor(let date of get_dates_to_draw()) {\n\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text)\n\t\t\t\t.addClass('lower-text')\n\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\tif(date.upper_text) {\n\t\t\t\tconst $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\n\t\t\t\t\t.addClass('upper-text')\n\t\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\t\t// remove out-of-bound dates\n\t\t\t\tif($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n\t\t\t\t\t$upper_text.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction get_dates_to_draw() {\n\t\tlet last_date = null;\n\t\tconst dates = self.dates.map((date, i) => {\n\t\t\tconst d = get_date_info(date, last_date, i);\n\t\t\tlast_date = date;\n\t\t\treturn d;\n\t\t});\n\t\treturn dates;\n\t}\n\n\tfunction get_date_info(date, last_date, i) {\n\t\tif(!last_date) {\n\t\t\tlast_date = date.clone().add(1, 'year');\n\t\t}\n\t\tconst date_text = {\n\t\t\t'Quarter Day_lower': date.format('HH'),\n\t\t\t'Half Day_lower': date.format('HH'),\n\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n\t\t\t'Week_lower': 'Week ' + date.format('W'),\n\t\t\t'Month_lower': date.format('MMMM'),\n\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Half Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n\t\t};\n\n\t\tconst base_pos = {\n\t\t\tx: i * self.config.column_width,\n\t\t\tlower_y: self.config.header_height,\n\t\t\tupper_y: self.config.header_height - 25\n\t\t};\n\n\t\tconst x_pos = {\n\t\t\t'Quarter Day_lower': (self.config.column_width * 4) / 2,\n\t\t\t'Quarter Day_upper': 0,\n\t\t\t'Half Day_lower': (self.config.column_width * 2) / 2,\n\t\t\t'Half Day_upper': 0,\n\t\t\t'Day_lower': self.config.column_width / 2,\n\t\t\t'Day_upper': (self.config.column_width * 30) / 2,\n\t\t\t'Week_lower': self.config.column_width / 2,\n\t\t\t'Week_upper': (self.config.column_width * 4) / 2,\n\t\t\t'Month_lower': (date.daysInMonth() * self.config.column_width / 30) / 2,\n\t\t\t'Month_upper': (self.config.column_width * 12) / 2\n\t\t};\n\n\t\treturn {\n\t\t\tupper_text: date_text[`${self.config.view_mode}_upper`],\n\t\t\tlower_text: date_text[`${self.config.view_mode}_lower`],\n\t\t\tupper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\n\t\t\tupper_y: base_pos.upper_y,\n\t\t\tlower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\n\t\t\tlower_y: base_pos.lower_y\n\t\t};\n\t}\n\n\tfunction make_arrows() {\n\n\t\tfor(let task of self.tasks) {\n\t\t\tself._arrows = task.dependencies.map(dep => {\n\t\t\t\tconst dependency = get_task(dep);\n\t\t\t\tif(!dependency) return;\n\n\t\t\t\tconst arrow = Arrow(\n\t\t\t\t\tself, // gt\n\t\t\t\t\tself._bars[dependency._index], // from_task\n\t\t\t\t\tself._bars[task._index] // to_task\n\t\t\t\t);\n\t\t\t\tself.element_groups.arrow.add(arrow.element);\n\t\t\t\treturn arrow; // eslint-disable-line\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction make_bars() {\n\n\t\tself._bars = self.tasks.map((task) => {\n\t\t\tconst bar = Bar(self, task);\n\t\t\tself.element_groups.bar.add(bar.group);\n\t\t\treturn bar;\n\t\t});\n\t}\n\n\tfunction map_arrows_on_bars() {\n\n\t\tfor(let bar of self._bars) {\n\t\t\tbar.arrows = self._arrows.filter(arrow => {\n\t\t\t\treturn arrow.from_task.task.id === bar.task.id ||\n\t\t\t\t\tarrow.to_task.task.id === bar.task.id;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction setup_events() {\n\t\t// this._bars.forEach(function(bar) {\n\t\t// \tbar.events.on_date_change = me.events.bar_on_date_change;\n\t\t// \tbar.events.on_progress_change = me.events.bar_on_progress_change;\n\t\t// \tbar.click(me.events.bar_on_click);\n\t\t// });\n\t}\n\n\tfunction bind_grid_click() {\n\t\tself.element_groups.grid.click(() => {\n\t\t\tself.canvas.selectAll('.bar-wrapper').forEach(el => {\n\t\t\t\tel.removeClass('active');\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction view_is(modes) {\n\t\tif (typeof modes === 'string') {\n\t\t\treturn self.config.view_mode === modes;\n\t\t} else if(Array.isArray(modes)) {\n\t\t\tfor (let mode of modes) {\n\t\t\t\tif(self.config.view_mode === mode) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\tself.view_is = view_is;\n\n\tfunction get_task(id) {\n\t\tself.tasks.find((task) => {\n\t\t\treturn task.id === id;\n\t\t});\n\t}\n\n\tfunction get_bar(id) {\n\t\tself._bars.find((bar) => {\n\t\t\treturn bar.task.id === id;\n\t\t});\n\t}\n\tself.get_bar = get_bar; // required in Bar\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Gantt.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js?sourceMap!./../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gantt.scss\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gantt #grid .grid-background{fill:none}.gantt #grid .grid-header{fill:#fff;stroke:#e0e0e0;stroke-width:1.4}.gantt #grid .grid-row{fill:#fff}.gantt #grid .grid-row:nth-child(even){fill:#f5f5f5}.gantt #grid .row-line{stroke:#ebeff2}.gantt #grid .tick{stroke:#e0e0e0;stroke-width:.2}.gantt #grid .tick.thick{stroke-width:.4}.gantt #grid .today-highlight{fill:#fcf8e3;opacity:.5}.gantt #arrow{fill:none;stroke:#666;stroke-width:1.4}.gantt .bar{fill:#b8c2cc;stroke:#8d99a6;stroke-width:0;transition:stroke-width .3s ease}.gantt .bar-progress{fill:#a3a3ff}.gantt .bar-invalid{fill:transparent;stroke:#8d99a6;stroke-width:1;stroke-dasharray:5}.gantt .bar-invalid~.bar-label{fill:#555}.gantt .bar-label{fill:#fff;dominant-baseline:central;text-anchor:middle;font-size:12px;font-weight:lighter;letter-spacing:.8px}.gantt .bar-label.big{fill:#555;text-anchor:start}.gantt .handle{fill:#ddd;cursor:ew-resize;opacity:0;visibility:hidden;transition:opacity .3s ease}.gantt .bar-wrapper{cursor:pointer}.gantt .bar-wrapper:hover .bar{stroke-width:2}.gantt .bar-wrapper:hover .handle{visibility:visible;opacity:1}.gantt .bar-wrapper.active .bar{stroke-width:2}.gantt .primary-text,.gantt .secondary-text{font-size:12px;text-anchor:middle}.gantt .primary-text{fill:#555}.gantt .secondary-text{fill:#333}.gantt #details{font-size:14}.gantt #details .details-container{stroke:#e0e0e0;stroke-width:1.1;fill:#fff}.gantt #details .details-heading{fill:#333;font-weight:500}.gantt #details .details-body{fill:#555}.gantt .hide{display:none}\", \"\", {\"version\":3,\"sources\":[\"/./src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAYA,8BAGG,SAAU,CAHb,0BAMG,UACA,eACA,gBAAiB,CARpB,uBAWG,SAAa,CAXhB,uCAcG,YAvBe,CASlB,uBAiBG,cAzByB,CAQ5B,mBAoBG,eACA,eAAiB,CArBpB,yBAuBI,eAAiB,CAvBrB,8BA2BG,aACA,UAAY,CA5Bf,cAiCE,UACA,YACA,gBAAiB,CAnCnB,YAuCE,aACA,eACA,eACA,gCAAiC,CA1CnC,qBA6CE,YAhDY,CAGd,oBAgDE,iBACA,eACA,eACA,kBAAmB,CAnDrB,+BAsDG,SA3Dc,CAKjB,kBA0DE,UACA,0BACA,mBACA,eACA,oBACA,mBAAqB,CA/DvB,sBAkEG,UACA,iBAAkB,CAnErB,eAwEE,UACA,iBACA,UACA,kBACA,2BAA4B,CA5E9B,oBAgFE,cAAe,CAhFjB,+BAoFI,cAAe,CApFnB,kCAwFI,mBACA,SAAU,CAzFd,gCA+FI,cAAe,CA/FnB,4CAqGE,eACA,kBAAmB,CAtGrB,qBAyGE,SA9Ge,CAKjB,uBA4GE,SAhHe,CAIjB,gBAgHE,YAAa,CAhHf,mCAmHG,eACA,iBACA,SAAU,CArHb,iCAwHG,UACA,eAAgB,CAzHnB,8BA4HG,SAjIc,CAKjB,aAiIE,YAAa,CACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fcf8e3;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$blue: #a3a3ff;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\t#grid {\\n\\t\\t.grid-background {\\n\\t\\t\\tfill: none;\\n\\t\\t}\\n\\t\\t.grid-header {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.4;\\n\\t\\t}\\n\\t\\t.grid-row {\\n\\t\\t\\tfill: #ffffff;\\n\\t\\t}\\n\\t\\t.grid-row:nth-child(even) {\\n\\t\\t\\tfill: $light-bg;\\n\\t\\t}\\n\\t\\t.row-line {\\n\\t\\t\\tstroke: $light-border-color;\\n\\t\\t}\\n\\t\\t.tick {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 0.2;\\n\\t\\t\\t&.thick {\\n\\t\\t\\t\\tstroke-width: 0.4;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t.today-highlight {\\n\\t\\t\\tfill: $light-yellow;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\tfill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: lighter;\\n\\t\\tletter-spacing: 0.8px;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.primary-text, .secondary-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.primary-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.secondary-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\n\\t#details {\\n\\t\\tfont-size: 14;\\n\\n\\t\\t.details-container {\\n\\t\\t\\tstroke: $border-color;\\n\\t\\t\\tstroke-width: 1.1;\\n\\t\\t\\tfill: #fff;\\n\\t\\t}\\n\\t\\t.details-heading {\\n\\t\\t\\tfill: $text-color;\\n\\t\\t\\tfont-weight: 500;\\n\\t\\t}\\n\\t\\t.details-body {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/sass-loader?sourceMap!./src/gantt.scss\n ** module id = 2\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/* global Snap */\n/*\n\tClass: Bar\n\n\tOpts:\n\t\tcanvas [reqd]\n\t\ttask [reqd]\n\t\tcolumn_width [reqd]\n\t\tx\n\t\ty\n*/\n\nexport default function Bar(gt, task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\tprepare();\n\t\tdraw();\n\t\tbind();\n\t}\n\n\tfunction set_defaults() {\n\t\tself.action_completed = false;\n\t\tself.task = task;\n\t}\n\n\tfunction prepare() {\n\t\tprepare_values();\n\t\tprepare_plugins();\n\t}\n\n\tfunction prepare_values() {\n\t\tself.invalid = self.task.invalid;\n\t\tself.height = gt.config.bar.height;\n\t\tself.x = compute_x();\n\t\tself.y = compute_y();\n\t\tself.corner_radius = 3;\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\tself.width = gt.config.column_width * self.duration;\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper');\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t}\n\n\tfunction prepare_plugins() {\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\tElement.prototype.getX = function () {\n\t\t\t\treturn +this.attr('x');\n\t\t\t};\n\t\t\tElement.prototype.getY = function () {\n\t\t\t\treturn +this.attr('y');\n\t\t\t};\n\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\treturn +this.attr('width');\n\t\t\t};\n\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\treturn +this.attr('height');\n\t\t\t};\n\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction draw() {\n\t\tdraw_bar();\n\t\tdraw_progress_bar();\n\t\tdraw_label();\n\t\tdraw_resize_handles();\n\t}\n\n\tfunction draw_bar() {\n\t\tself.$bar = gt.canvas.rect(self.x, self.y,\n\t\t\tself.width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar')\n\t\t\t.appendTo(self.bar_group);\n\t\tif (self.invalid) {\n\t\t\tself.$bar.addClass('bar-invalid');\n\t\t}\n\t}\n\n\tfunction draw_progress_bar() {\n\t\tif (self.invalid) return;\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\n\t\t\tself.progress_width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar-progress')\n\t\t\t.appendTo(self.bar_group);\n\t}\n\n\tfunction draw_label() {\n\t\tgt.canvas.text(self.x + self.width / 2,\n\t\t\tself.y + self.height / 2,\n\t\t\tself.task.name)\n\t\t\t.addClass('bar-label')\n\t\t\t.appendTo(self.bar_group);\n\t\tupdate_label_position();\n\t}\n\n\tfunction draw_resize_handles() {\n\t\tif (self.invalid) return;\n\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle_width = 8;\n\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle right')\n\t\t\t.appendTo(self.handle_group);\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle left')\n\t\t\t.appendTo(self.handle_group);\n\n\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\tgt.canvas.polygon(\n\t\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\n\t\t\t)\n\t\t\t\t.addClass('handle progress')\n\t\t\t\t.appendTo(self.handle_group);\n\t\t}\n\t}\n\n\t// function draw_invalid_bar() {\n\t// \tconst x = moment().startOf('day').diff(gt.gantt_start, 'hours') /\n\t// \t\tgt.config.step * gt.config.column_width;\n\n\t// \tgt.canvas.rect(x, self.y,\n\t// \t\tgt.config.column_width * 2, self.height,\n\t// \t\tself.corner_radius, self.corner_radius)\n\t// \t\t.addClass('bar-invalid')\n\t// \t\t.appendTo(self.bar_group);\n\n\t// \tgt.canvas.text(\n\t// \t\tx + gt.config.column_width,\n\t// \t\tself.y + self.height / 2,\n\t// \t\t'Dates not set')\n\t// \t\t.addClass('bar-label big')\n\t// \t\t.appendTo(self.bar_group);\n\t// }\n\n\tfunction bind() {\n\t\tif (self.invalid) return;\n\t\tshow_details();\n\t\tbind_resize();\n\t\tbind_drag();\n\t\tbind_resize_progress();\n\t}\n\n\tfunction show_details() {\n\t\tconst popover_group = gt.element_groups.details;\n\t\tlet details_box = popover_group.select('.details-wrapper');\n\n\t\tif (!details_box) {\n\t\t\tdetails_box = gt.canvas.group()\n\t\t\t\t.addClass('details-wrapper')\n\t\t\t\t.appendTo(popover_group);\n\t\t\tgt.canvas.rect(0, 0, 0, 110, 2, 2)\n\t\t\t\t.addClass('details-container')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 30 })\n\t\t\t\t.addClass('details-heading')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 65 })\n\t\t\t\t.addClass('details-body')\n\t\t\t\t.appendTo(details_box);\n\t\t\tgt.canvas.text(0, 0, '')\n\t\t\t\t.attr({ dx: 10, dy: 90 })\n\t\t\t\t.addClass('details-body')\n\t\t\t\t.appendTo(details_box);\n\t\t}\n\n\t\tself.group.mouseover((e, x, y) => {\n\t\t\tpopover_group.removeClass('hide');\n\n\t\t\tconst pos = get_details_position();\n\t\t\tdetails_box.transform(`t${pos.x},${pos.y}`);\n\n\t\t\tconst start_date = self.task._start.format('MMM D'),\n\t\t\t\tend_date = self.task._end.format('MMM D'),\n\t\t\t\theading = `${self.task.name}: ${start_date} - ${end_date}`;\n\n\t\t\tconst $heading = popover_group\n\t\t\t\t.select('.details-heading')\n\t\t\t\t.attr('text', heading);\n\n\t\t\tconst bbox = $heading.getBBox();\n\t\t\tdetails_box.select('.details-container')\n\t\t\t\t.attr({ width: bbox.width + 20 });\n\n\t\t\tconst duration = self.task._end.diff(self.task._start, 'days'),\n\t\t\t\tbody1 = `Duration: ${duration} days`,\n\t\t\t\tbody2 = self.task.progress ?\n\t\t\t\t\t`Progress: ${self.task.progress}` : '';\n\n\t\t\tconst $body = popover_group.selectAll('.details-body');\n\t\t\t$body[0].attr('text', body1);\n\t\t\t$body[1].attr('text', body2);\n\t\t});\n\n\t\tself.group.mouseout(() => {\n\t\t\tsetTimeout(() => popover_group.addClass('hide'), 500);\n\t\t});\n\t}\n\n\tfunction get_details_position() {\n\t\treturn {\n\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\ty: self.$bar.getY() - 10\n\t\t};\n\t}\n\n\tfunction bind_resize() {\n\t\tconst { left, right } = get_handles();\n\n\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\tright.drag(onmove_right, onstart, onstop_right);\n\n\t\tfunction onstart() {\n\t\t\tonstart();\n\t\t\tthis.ox = this.getX();\n\t\t\tthis.oy = this.getY();\n\t\t}\n\n\t\tfunction onmove_right(dx, dy) {\n\t\t\tonmove_handle_right(dx, dy);\n\t\t}\n\t\tfunction onstop_right() {\n\t\t\tonstop_handle_right();\n\t\t}\n\n\t\tfunction onmove_left(dx, dy) {\n\t\t\tonmove_handle_left(dx, dy);\n\t\t}\n\t\tfunction onstop_left() {\n\t\t\tonstop_handle_left();\n\t\t}\n\t}\n\n\tfunction get_handles() {\n\t\treturn {\n\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\tright: self.handle_group.select('.handle.right')\n\t\t};\n\t}\n\n\tfunction bind_drag() {\n\t\tself.bar_group.drag(onmove, onstart, onstop);\n\n\t\tfunction onmove(dx, dy) {\n\t\t\tonmove(dx, dy);\n\t\t}\n\t\tfunction onstop() {\n\t\t\tonstop();\n\t\t}\n\t\tfunction onstart() {\n\t\t\tonstart();\n\t\t}\n\t}\n\n\tfunction bind_resize_progress() {\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle = self.group.select('.handle.progress');\n\t\thandle && handle.drag(onmove, onstart, onstop);\n\n\t\tfunction onmove(dx, dy) {\n\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t}\n\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t}\n\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\thandle.transform(`t{dx},0`);\n\t\t\tbar_progress.finaldx = dx;\n\t\t}\n\t\tfunction onstop() {\n\t\t\tif (!bar_progress.finaldx) return;\n\t\t\tprogress_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\tfunction onstart() {\n\t\t\tbar_progress.finaldx = 0;\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t}\n\t}\n\n\tfunction onstart() {\n\t\tconst bar = self.$bar;\n\t\tbar.ox = bar.getX();\n\t\tbar.oy = bar.getY();\n\t\tbar.owidth = bar.getWidth();\n\t\tbar.finaldx = 0;\n\t\trun_method_for_dependencies('onstart');\n\t}\n\tself.onstart = onstart;\n\n\tfunction onmove(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(bar.ox + bar.finaldx);\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove = onmove;\n\n\tfunction onstop() {\n\t\tconst bar = self.$bar;\n\t\tif (!bar.finaldx) return;\n\t\tdate_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop = onstop;\n\n\tfunction onmove_handle_left(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(bar.ox + bar.finaldx, bar.owidth - bar.finaldx);\n\t\trun_method_for_dependencies('onmove_handle_left', [dx, dy]);\n\t}\n\tself.onmove_handle_left = onmove_handle_left;\n\n\tfunction onstop_handle_left() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop_handle_left');\n\t}\n\tself.onstop_handle_left = onstop_handle_left;\n\n\tfunction run_method_for_dependencies(fn, args) {\n\t\tconst dm = gt.dependency_map;\n\t\tif (dm[self.task.id]) {\n\t\t\tfor (let deptask of dm[self.task.id]) {\n\t\t\t\tconst dt = gt.get_bar(deptask);\n\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onmove_handle_right(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position(null, bar.owidth + bar.finaldx);\n\t}\n\n\tfunction onstop_handle_right() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t}\n\n\tfunction update_bar_position(x, width) {\n\t\tconst bar = self.$bar;\n\t\tif (x) update_attr(bar, 'x', x);\n\t\tif (width) update_attr(bar, 'width', width);\n\t\tupdate_label_position();\n\t\tupdate_handle_position();\n\t\tupdate_progressbar_position();\n\t\tupdate_arrow_position();\n\t\tupdate_details_position();\n\t}\n\n\t// function click(callback) {\n\t// \tself.group.click(function () {\n\t// \t\tif (self.action_completed) {\n\t// \t\t\t// just finished a move action, wait for a few seconds\n\t// \t\t\treturn;\n\t// \t\t}\n\t// \t\tif (self.group.hasClass('active')) {\n\t// \t\t\tcallback(self.task);\n\t// \t\t}\n\t// \t\tunselect_all();\n\t// \t\tself.group.toggleClass('active');\n\t// \t});\n\t// }\n\n\tfunction date_changed() {\n\t\tself.events.on_date_change &&\n\t\t\tself.events.on_date_change(\n\t\t\t\tself.task,\n\t\t\t\tcompute_start_date(),\n\t\t\t\tcompute_end_date()\n\t\t\t);\n\t}\n\n\tfunction progress_changed() {\n\t\tself.events.on_progress_change &&\n\t\t\tself.events.on_progress_change(\n\t\t\t\tself.task,\n\t\t\t\tcompute_progress()\n\t\t\t);\n\t}\n\n\tfunction set_action_completed() {\n\t\tself.action_completed = true;\n\t\tsetTimeout(() => self.action_completed = false, 2000);\n\t}\n\n\t// function compute_date(x) {\n\t// \tconst shift = (x - compute_x()) / gt.config.column_width;\n\t// \tconst date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t// \treturn date;\n\t// }\n\n\tfunction compute_start_date() {\n\t\tconst bar = self.$bar,\n\t\t\tshift = (bar.getX() - compute_x()) / gt.config.column_width,\n\t\t\tnew_start_date = self.task._start.clone().add(gt.config.step * shift, 'hours');\n\t\treturn new_start_date;\n\t}\n\n\tfunction compute_end_date() {\n\t\tconst bar = self.$bar,\n\t\t\tog_x = compute_x() + self.duration * gt.config.column_width,\n\t\t\tfinal_x = bar.getEndX(),\n\t\t\tshift = (final_x - og_x) / gt.config.column_width,\n\t\t\tnew_end_date = self.task._end.clone().add(gt.config.step * shift, 'hours');\n\t\treturn new_end_date;\n\t}\n\n\tfunction compute_progress() {\n\t\treturn self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t}\n\n\tfunction compute_x() {\n\t\tlet x = self.task._start.diff(gt.gantt_start, 'hours') /\n\t\t\tgt.config.step * gt.config.column_width;\n\n\t\tif (gt.view_is('Month')) {\n\t\t\tx = self.task._start.diff(gt.config.start, 'days') *\n\t\t\t\tgt.config.column_width / 30;\n\t\t}\n\t\treturn x;\n\t}\n\n\tfunction compute_y() {\n\t\treturn gt.config.header_height + gt.config.padding +\n\t\t\tself.task._index * (self.height + gt.config.padding);\n\t}\n\n\tfunction get_snap_position(dx) {\n\t\tlet odx = dx, rem, position;\n\n\t\tif (gt.view_is('Week')) {\n\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\n\t\t} else if (gt.view_is('Month')) {\n\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\n\t\t} else {\n\t\t\trem = dx % gt.config.column_width;\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\n\t\t}\n\t\treturn position;\n\t}\n\n\tfunction update_attr(element, attr, value) {\n\t\tvalue = +value;\n\t\tif (!isNaN(value)) {\n\t\t\telement.attr(attr, value);\n\t\t}\n\t\treturn element;\n\t}\n\n\tfunction update_progressbar_position() {\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t}\n\n\tfunction update_label_position() {\n\t\tconst bar = self.$bar,\n\t\t\tlabel = self.group.select('.bar-label');\n\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t} else {\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t}\n\t}\n\n\tfunction update_handle_position() {\n\t\tconst bar = self.$bar;\n\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t'x': bar.getX() + 1\n\t\t});\n\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t'x': bar.getEndX() - 9\n\t\t});\n\t}\n\n\tfunction update_arrow_position() {\n\t\tfor (let arrow of self.arrows) {\n\t\t\tarrow.update();\n\t\t}\n\t}\n\n\tfunction update_details_position() {\n\t\tconst details_box = gt.element_groups.details.select('.details-wrapper');\n\t\tconst pos = get_details_position();\n\t\tdetails_box && details_box.transform(`t${pos.x},${pos.y}`);\n\t}\n\n\t// function unselect_all() {\n\t// \tgt.canvas.selectAll('.bar-wrapper').forEach(function (el) {\n\t// \t\tel.removeClass('active');\n\t// \t});\n\t// }\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Bar.js\n **/","/* global Snap */\n/*\n\tClass: Arrow\n\tfrom_task ---> to_task\n\n\tOpts:\n\t\tgantt (Gantt object)\n\t\tfrom_task (Bar object)\n\t\tto_task (Bar object)\n*/\n\nexport default function Arrow(gt, from_task, to_task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tself.from_task = from_task;\n\t\tself.to_task = to_task;\n\t\tprepare();\n\t\tdraw();\n\t}\n\n\tfunction prepare() {\n\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\n\t\tconst condition = () =>\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\n\n\t\twhile(condition()) {\n\t\t\tself.start_x -= 10;\n\t\t}\n\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\n\t\tself.curve = gt.config.arrow.curve;\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\tself.offset = from_is_below_to ?\n\t\t\tself.end_y + gt.config.arrow.curve :\n\t\t\tself.end_y - gt.config.arrow.curve;\n\n\t\tself.path =\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t{\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\tself.path =\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t\t{\n\t\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.get('height') / 2 - self.curve_y,\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\t\toffset: self.offset,\n\t\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction draw() {\n\t\tself.element = self.gantt.canvas.path(self.path)\n\t\t\t.attr('data-from', self.from_task.task.id)\n\t\t\t.attr('data-to', self.to_task.task.id);\n\t}\n\n\tfunction update() { // eslint-disable-line\n\t\tself.prepare();\n\t\tself.element.attr('d', self.path);\n\t}\n\tself.update = update;\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Arrow.js\n **/"],"sourceRoot":""}